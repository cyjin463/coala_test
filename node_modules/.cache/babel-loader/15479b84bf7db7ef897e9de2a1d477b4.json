{"ast":null,"code":"var _jsxFileName = \"/Users/cyj/sun/src/page/Create.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport styled from \"styled-components\";\nimport { useLocation, useParams } from \"react-router\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { ReactComponent as ArrowSvg } from \"../svg/arrow_down_b.svg\";\nimport { ReactComponent as ArrowActiveSvg } from \"../svg/arrow_up_b.svg\";\nimport { actionCreators as postActions } from \"../redux/modules/post\";\nimport { history } from \"../redux/configureStore\";\nimport { category } from \"../elements/category\";\nimport ImgUpload from \"../components/ImgUpload\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Create = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const location = useLocation();\n  const params = useParams().pid;\n  const isCreate = location.pathname === \"/create\";\n  const img_list = useSelector(state => {\n    var _state$post;\n\n    return (_state$post = state.post) === null || _state$post === void 0 ? void 0 : _state$post.preview;\n  });\n  const post_one = useSelector(state => state.post.list);\n  const [addPost, setAddPost] = React.useState(!isCreate ? post_one : []);\n  const [isSelect, setIsSelect] = React.useState(false);\n  const [oneCategory, setOneCategory] = React.useState(\"\");\n  const token = sessionStorage.getItem(\"token\");\n  const reg = /[\\{\\}\\[\\]\\/?.,;:|\\)*~`!^\\-_+<>@\\#$%&\\\\\\=\\(\\'\\\"]/gi;\n  React.useEffect(() => {\n    if (!token) {\n      window.alert(\"로그인 후 사용해주세요 :)\");\n      history.replace(\"/login\");\n    }\n  }, []);\n  React.useEffect(() => {\n    if (!isCreate) {\n      dispatch(postActions.getOnePostDB(params));\n      setAddPost(post_one);\n      setOneCategory(addPost.category);\n    }\n  }, []);\n\n  const onChange = e => {\n    const id = e.target.id;\n    const content = e.target.value;\n    setAddPost({ ...addPost,\n      [id]: content\n    });\n  };\n\n  const submit = () => {\n    if (!addPost.title || !addPost.comment) {\n      alert(\"내용을 모두 입력해주세요 :)\");\n      return;\n    } else if (!oneCategory) {\n      alert(\"카테고리를 선택해 주세요 :)\");\n      return;\n    } else if (addPost.tags) {\n      var _addPost$tags;\n\n      const tags = (_addPost$tags = addPost.tags) === null || _addPost$tags === void 0 ? void 0 : _addPost$tags.split(\"#\").splice(1);\n      let text_tag = tags.map(v => reg.test(v) ? v.replace(reg, \"\") : v).filter(v => v !== \"\");\n      dispatch(postActions.addPostDB({ ...addPost,\n        tags: text_tag,\n        category: oneCategory\n      }));\n    } else {\n      dispatch(postActions.addPostDB({ ...addPost,\n        category: oneCategory\n      }));\n    }\n  };\n\n  const revise = () => {\n    if (typeof addPost.tags === \"string\") {\n      var _addPost$tags2;\n\n      const tags = (_addPost$tags2 = addPost.tags) === null || _addPost$tags2 === void 0 ? void 0 : _addPost$tags2.split(\"#\").splice(1);\n      let text_tag = tags.map(v => reg.test(v) ? v.replace(reg, \"\") : v).filter(v => v !== \"\");\n      dispatch(postActions.editPostDB({ ...addPost,\n        pid: params,\n        tag: text_tag,\n        category: oneCategory\n      }));\n    } else {\n      dispatch(postActions.editPostDB({ ...addPost,\n        pid: params,\n        category: oneCategory\n      }));\n    }\n  };\n\n  console.log(addPost);\n\n  if (!isCreate) {\n    var _addPost$tag;\n\n    return /*#__PURE__*/_jsxDEV(PostWrap, {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\uC218\\uC815 \\uD398\\uC774\\uC9C0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uCE74\\uD14C\\uACE0\\uB9AC \\uC120\\uD0DD\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CategoryDiv, {\n        length: category.length,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: oneCategory === \"\" ? \"\" : \"choose\",\n          onClick: () => {\n            setIsSelect(!isSelect);\n          },\n          children: [oneCategory ? oneCategory : addPost.category ? addPost.category : \" 카테고리를 선택\", isSelect ? /*#__PURE__*/_jsxDEV(ArrowActiveSvg, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 25\n          }, this) : /*#__PURE__*/_jsxDEV(ArrowSvg, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 46\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: isSelect ? \"\" : \"close\",\n          children: category.map((v, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n            onClick: () => {\n              setOneCategory(v.name);\n              setIsSelect(false);\n            },\n            children: v.name\n          }, idx, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uC81C\\uBAA9\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"postTitle\",\n        onChange: onChange,\n        type: \"text\",\n        value: addPost.postTitle\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uB0B4\\uC6A9\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextareaImg, {\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          id: \"postComment\",\n          onChange: onChange,\n          type: \"text\",\n          value: addPost.postComment\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ImgUpload, {\n          isEdit: true,\n          editImg: addPost.postImg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"\\uD0DC\\uADF8\\uC785\\uB825\", /*#__PURE__*/_jsxDEV(\"em\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"tags\",\n        onChange: onChange,\n        type: \"text\",\n        placeholder: `#${(_addPost$tag = addPost.tag) === null || _addPost$tag === void 0 ? void 0 : _addPost$tag.join(\" #\")}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: revise,\n        children: \"\\uC218\\uC815 click\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          history.replace(`/detail/${params}`);\n        },\n        children: \"\\uCDE8\\uC18C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(PostWrap, {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"\\uAE00\\uC4F0\\uAE30 \\uD398\\uC774\\uC9C0\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\uCE74\\uD14C\\uACE0\\uB9AC \\uC120\\uD0DD\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CategoryDiv, {\n      length: category.length,\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: oneCategory === \"\" ? \"\" : \"choose\",\n        onClick: () => {\n          setIsSelect(!isSelect);\n        },\n        children: [oneCategory === \"\" ? \" 카테고리를 선택\" : oneCategory, isSelect ? /*#__PURE__*/_jsxDEV(ArrowActiveSvg, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 23\n        }, this) : /*#__PURE__*/_jsxDEV(ArrowSvg, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 44\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: isSelect ? \"\" : \"close\",\n        children: category.map((v, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n          onClick: () => {\n            setOneCategory(v.name);\n            setIsSelect(false);\n          },\n          children: v.name\n        }, idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\uC81C\\uBAA9\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      id: \"title\",\n      onChange: onChange,\n      type: \"text\",\n      placeholder: \"\\uC81C\\uBAA9\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\uB0B4\\uC6A9\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TextareaImg, {\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        id: \"comment\",\n        onChange: onChange,\n        type: \"text\",\n        placeholder: \"\\uB0B4\\uC6A9\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ImgUpload, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"\\uD0DC\\uADF8\\uC785\\uB825\", /*#__PURE__*/_jsxDEV(\"em\", {\n        children: \"(\\uC120\\uD0DD\\uC0AC\\uD56D)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      id: \"tags\",\n      onChange: onChange,\n      type: \"text\",\n      placeholder: \"\\uD2B9\\uC218\\uBB38\\uC790\\uB294 # \\uB9CC \\uC785\\uB825 \\uAC00\\uB2A5\\uD569\\uB2C8\\uB2E4.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: submit,\n      children: \"\\uC62C\\uB9AC\\uAE30\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 180,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Create, \"+XDx/y5r6QmfOYYKmEdyqhStZN0=\", false, function () {\n  return [useDispatch, useLocation, useParams, useSelector, useSelector];\n});\n\n_c = Create;\nconst PostWrap = styled.div`\n  max-width: 1073px;\n  margin: 0 auto;\n  padding: 50px 26px;\n  border-radius: 8px;\n  box-shadow: 0 4px 20px 0 rgba(228, 226, 242, 0.45);\n\n  h1 {\n    display: none;\n  }\n\n  h2 {\n    font-size: 16px;\n    margin-bottom: 8px;\n\n    em {\n      font-weight: normal;\n      font-style: normal;\n      margin-left: 4px;\n      color: #797979;\n      font-size: 12px;\n    }\n  }\n\n  label > input#file-upload-button {\n    display: none;\n  }\n\n  input {\n    display: block;\n    width: 100%;\n    height: 52px;\n    padding: 16px;\n    margin-bottom: 24px;\n    border: none;\n    border-radius: 8px;\n    background-color: #fbfbfd;\n\n    &::placeholder {\n      color: #797979;\n    }\n  }\n\n  button {\n    display: block;\n    width: 200px;\n    line-height: 50px;\n    margin-top: 48px;\n    margin-left: auto;\n    background-color: #7966ff;\n    border-radius: 8px;\n    font-size: 16px;\n    color: #fff;\n  }\n`;\n_c2 = PostWrap;\nconst TextareaImg = styled.div`\n  margin-bottom: 40px;\n  border-radius: 8px;\n  background-color: #fbfbfd;\n\n  textarea {\n    display: block;\n    width: 100%;\n    padding: 16px;\n    min-height: 400px;\n    border: none;\n    background-color: transparent;\n    resize: none;\n\n    &::placeholder {\n      color: #797979;\n    }\n  }\n\n  .img_load {\n    border-radius: 8px;\n    border-bottom: none;\n    background-color: #f4f4fb;\n\n    svg {\n      margin-left: 0;\n    }\n  }\n`;\n_c3 = TextareaImg;\nconst CategoryDiv = styled.div`\n  display: inline-block;\n  width: 300px;\n  margin-bottom: 24px;\n  position: relative;\n\n  > span {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    width: 100%;\n    height: 52px;\n    line-height: 52px;\n    padding: 0 16px;\n    line-height: 46px;\n    color: #797979;\n    border-radius: 8px;\n    background-color: #fbfbfd;\n\n    &.choose {\n      color: #7966ff;\n    }\n  }\n\n  ul {\n    position: absolute;\n    top: calc(46px + 8px);\n    left: 0;\n    width: 100%;\n    height: ${props => `calc(${props.length} * 46px + 20px)`};\n    overflow: hidden;\n    margin: 0;\n    transition: height 0.5s ease-out;\n    background-color: #fff;\n    border-radius: 0 0 8px 8px;\n    box-shadow: 0 4px 14px 0 rgba(65, 0, 131, 0.06);\n\n    &.close {\n      height: 0;\n      padding: 0;\n    }\n  }\n\n  li {\n    margin: 0 10px;\n    text-align: center;\n    line-height: 46px;\n    cursor: pointer;\n\n    &:nth-child(1) {\n      margin-top: 10px;\n    }\n\n    &:last-child {\n      margin-bottom: 10px;\n    }\n    &:hover {\n      background-color: #7966ff;\n      color: #fff;\n    }\n  }\n`;\n_c4 = CategoryDiv;\nexport default Create;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"Create\");\n$RefreshReg$(_c2, \"PostWrap\");\n$RefreshReg$(_c3, \"TextareaImg\");\n$RefreshReg$(_c4, \"CategoryDiv\");","map":{"version":3,"sources":["/Users/cyj/sun/src/page/Create.js"],"names":["React","styled","useLocation","useParams","useDispatch","useSelector","ReactComponent","ArrowSvg","ArrowActiveSvg","actionCreators","postActions","history","category","ImgUpload","Create","dispatch","location","params","pid","isCreate","pathname","img_list","state","post","preview","post_one","list","addPost","setAddPost","useState","isSelect","setIsSelect","oneCategory","setOneCategory","token","sessionStorage","getItem","reg","useEffect","window","alert","replace","getOnePostDB","onChange","e","id","target","content","value","submit","title","comment","tags","split","splice","text_tag","map","v","test","filter","addPostDB","revise","editPostDB","tag","console","log","length","idx","name","postTitle","postComment","postImg","join","PostWrap","div","TextareaImg","CategoryDiv","props"],"mappings":"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AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAtDA;MAAMD,Q;AAwDN,MAAME,WAAW,GAAG1E,MAAM,CAACyE,GAAI;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CA5BA;MAAMC,W;AA8BN,MAAMC,WAAW,GAAG3E,MAAM,CAACyE,GAAI;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAeG,KAAD,IAAY,QAAOA,KAAK,CAACX,MAAO,iBAAiB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CA7DA;MAAMU,W;AA+DN,eAAe9D,MAAf","sourcesContent":["import React from \"react\";\nimport styled from \"styled-components\";\nimport { useLocation, useParams } from \"react-router\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { ReactComponent as ArrowSvg } from \"../svg/arrow_down_b.svg\";\nimport { ReactComponent as ArrowActiveSvg } from \"../svg/arrow_up_b.svg\";\nimport { actionCreators as postActions } from \"../redux/modules/post\";\nimport { history } from \"../redux/configureStore\";\nimport { category } from \"../elements/category\";\nimport ImgUpload from \"../components/ImgUpload\";\n\nconst Create = () => {\n  const dispatch = useDispatch();\n  const location = useLocation();\n  const params = useParams().pid;\n\n  const isCreate = location.pathname === \"/create\";\n  const img_list = useSelector((state) => state.post?.preview);\n  const post_one = useSelector((state) => state.post.list);\n  const [addPost, setAddPost] = React.useState(!isCreate ? post_one : []);\n  const [isSelect, setIsSelect] = React.useState(false);\n  const [oneCategory, setOneCategory] = React.useState(\"\");\n  const token = sessionStorage.getItem(\"token\");\n  const reg = /[\\{\\}\\[\\]\\/?.,;:|\\)*~`!^\\-_+<>@\\#$%&\\\\\\=\\(\\'\\\"]/gi;\n\n  React.useEffect(() => {\n    if (!token) {\n      window.alert(\"로그인 후 사용해주세요 :)\");\n      history.replace(\"/login\");\n    }\n  }, []);\n\n  React.useEffect(() => {\n    if (!isCreate) {\n      dispatch(postActions.getOnePostDB(params));\n      setAddPost(post_one);\n      setOneCategory(addPost.category);\n    }\n  }, []);\n\n  const onChange = (e) => {\n    const id = e.target.id;\n    const content = e.target.value;\n\n    setAddPost({ ...addPost, [id]: content });\n  };\n\n  const submit = () => {\n    if (!addPost.title || !addPost.comment) {\n      alert(\"내용을 모두 입력해주세요 :)\");\n      return;\n    } else if (!oneCategory) {\n      alert(\"카테고리를 선택해 주세요 :)\");\n      return;\n    } else if (addPost.tags) {\n      const tags = addPost.tags?.split(\"#\").splice(1);\n\n      let text_tag = tags\n        .map((v) => (reg.test(v) ? v.replace(reg, \"\") : v))\n        .filter((v) => v !== \"\");\n\n      dispatch(\n        postActions.addPostDB({\n          ...addPost,\n          tags: text_tag,\n          category: oneCategory,\n        })\n      );\n    } else {\n      dispatch(\n        postActions.addPostDB({\n          ...addPost,\n          category: oneCategory,\n        })\n      );\n    }\n  };\n\n  const revise = () => {\n    if (typeof addPost.tags === \"string\") {\n      const tags = addPost.tags?.split(\"#\").splice(1);\n\n      let text_tag = tags\n        .map((v) => (reg.test(v) ? v.replace(reg, \"\") : v))\n        .filter((v) => v !== \"\");\n\n      dispatch(\n        postActions.editPostDB({\n          ...addPost,\n          pid: params,\n          tag: text_tag,\n          category: oneCategory,\n        })\n      );\n    } else {\n      dispatch(\n        postActions.editPostDB({\n          ...addPost,\n          pid: params,\n          category: oneCategory,\n        })\n      );\n    }\n  };\n\n  console.log(addPost);\n  if (!isCreate) {\n    return (\n      <PostWrap>\n        <h1>수정 페이지</h1>\n\n        <h2>카테고리 선택</h2>\n        <CategoryDiv length={category.length}>\n          <span\n            className={oneCategory === \"\" ? \"\" : \"choose\"}\n            onClick={() => {\n              setIsSelect(!isSelect);\n            }}>\n            {oneCategory\n              ? oneCategory\n              : addPost.category\n              ? addPost.category\n              : \" 카테고리를 선택\"}\n\n            {isSelect ? <ArrowActiveSvg /> : <ArrowSvg />}\n          </span>\n          <ul className={isSelect ? \"\" : \"close\"}>\n            {category.map((v, idx) => (\n              <li\n                key={idx}\n                onClick={() => {\n                  setOneCategory(v.name);\n                  setIsSelect(false);\n                }}>\n                {v.name}\n              </li>\n            ))}\n          </ul>\n        </CategoryDiv>\n\n        <h2>제목</h2>\n        <input\n          id='postTitle'\n          onChange={onChange}\n          type='text'\n          value={addPost.postTitle}\n        />\n\n        <h2>내용</h2>\n        <TextareaImg>\n          <textarea\n            id='postComment'\n            onChange={onChange}\n            type='text'\n            value={addPost.postComment}></textarea>\n          <ImgUpload isEdit={true} editImg={addPost.postImg} />\n        </TextareaImg>\n\n        <h2>\n          태그입력<em></em>\n        </h2>\n        <input\n          id='tags'\n          onChange={onChange}\n          type='text'\n          placeholder={`#${addPost.tag?.join(\" #\")}`}\n        />\n        <button onClick={revise}>수정 click</button>\n        <button\n          onClick={() => {\n            history.replace(`/detail/${params}`);\n          }}>\n          취소\n        </button>\n      </PostWrap>\n    );\n  }\n\n  return (\n    <PostWrap>\n      <h1>글쓰기 페이지</h1>\n\n      <h2>카테고리 선택</h2>\n      <CategoryDiv length={category.length}>\n        <span\n          className={oneCategory === \"\" ? \"\" : \"choose\"}\n          onClick={() => {\n            setIsSelect(!isSelect);\n          }}>\n          {oneCategory === \"\" ? \" 카테고리를 선택\" : oneCategory}\n          {isSelect ? <ArrowActiveSvg /> : <ArrowSvg />}\n        </span>\n        <ul className={isSelect ? \"\" : \"close\"}>\n          {category.map((v, idx) => (\n            <li\n              key={idx}\n              onClick={() => {\n                setOneCategory(v.name);\n                setIsSelect(false);\n              }}>\n              {v.name}\n            </li>\n          ))}\n        </ul>\n      </CategoryDiv>\n      <h2>제목</h2>\n      <input id='title' onChange={onChange} type='text' placeholder='제목' />\n\n      <h2>내용</h2>\n      <TextareaImg>\n        <textarea\n          id='comment'\n          onChange={onChange}\n          type='text'\n          placeholder='내용'></textarea>\n        <ImgUpload />\n      </TextareaImg>\n\n      <h2>\n        태그입력<em>(선택사항)</em>\n      </h2>\n      <input\n        id='tags'\n        onChange={onChange}\n        type='text'\n        placeholder='특수문자는 # 만 입력 가능합니다.'\n      />\n      <button onClick={submit}>올리기</button>\n    </PostWrap>\n  );\n};\n\nconst PostWrap = styled.div`\n  max-width: 1073px;\n  margin: 0 auto;\n  padding: 50px 26px;\n  border-radius: 8px;\n  box-shadow: 0 4px 20px 0 rgba(228, 226, 242, 0.45);\n\n  h1 {\n    display: none;\n  }\n\n  h2 {\n    font-size: 16px;\n    margin-bottom: 8px;\n\n    em {\n      font-weight: normal;\n      font-style: normal;\n      margin-left: 4px;\n      color: #797979;\n      font-size: 12px;\n    }\n  }\n\n  label > input#file-upload-button {\n    display: none;\n  }\n\n  input {\n    display: block;\n    width: 100%;\n    height: 52px;\n    padding: 16px;\n    margin-bottom: 24px;\n    border: none;\n    border-radius: 8px;\n    background-color: #fbfbfd;\n\n    &::placeholder {\n      color: #797979;\n    }\n  }\n\n  button {\n    display: block;\n    width: 200px;\n    line-height: 50px;\n    margin-top: 48px;\n    margin-left: auto;\n    background-color: #7966ff;\n    border-radius: 8px;\n    font-size: 16px;\n    color: #fff;\n  }\n`;\n\nconst TextareaImg = styled.div`\n  margin-bottom: 40px;\n  border-radius: 8px;\n  background-color: #fbfbfd;\n\n  textarea {\n    display: block;\n    width: 100%;\n    padding: 16px;\n    min-height: 400px;\n    border: none;\n    background-color: transparent;\n    resize: none;\n\n    &::placeholder {\n      color: #797979;\n    }\n  }\n\n  .img_load {\n    border-radius: 8px;\n    border-bottom: none;\n    background-color: #f4f4fb;\n\n    svg {\n      margin-left: 0;\n    }\n  }\n`;\n\nconst CategoryDiv = styled.div`\n  display: inline-block;\n  width: 300px;\n  margin-bottom: 24px;\n  position: relative;\n\n  > span {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    width: 100%;\n    height: 52px;\n    line-height: 52px;\n    padding: 0 16px;\n    line-height: 46px;\n    color: #797979;\n    border-radius: 8px;\n    background-color: #fbfbfd;\n\n    &.choose {\n      color: #7966ff;\n    }\n  }\n\n  ul {\n    position: absolute;\n    top: calc(46px + 8px);\n    left: 0;\n    width: 100%;\n    height: ${(props) => `calc(${props.length} * 46px + 20px)`};\n    overflow: hidden;\n    margin: 0;\n    transition: height 0.5s ease-out;\n    background-color: #fff;\n    border-radius: 0 0 8px 8px;\n    box-shadow: 0 4px 14px 0 rgba(65, 0, 131, 0.06);\n\n    &.close {\n      height: 0;\n      padding: 0;\n    }\n  }\n\n  li {\n    margin: 0 10px;\n    text-align: center;\n    line-height: 46px;\n    cursor: pointer;\n\n    &:nth-child(1) {\n      margin-top: 10px;\n    }\n\n    &:last-child {\n      margin-bottom: 10px;\n    }\n    &:hover {\n      background-color: #7966ff;\n      color: #fff;\n    }\n  }\n`;\n\nexport default Create;\n"]},"metadata":{},"sourceType":"module"}