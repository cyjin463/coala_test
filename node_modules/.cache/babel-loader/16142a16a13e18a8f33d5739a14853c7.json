{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/cyj/sun/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";import _slicedToArray from\"/Users/cyj/sun/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _templateObject,_templateObject2;import React from\"react\";import styled from\"styled-components\";import{useParams}from\"react-router\";import{useSelector,useDispatch}from\"react-redux\";import{useInView}from\"react-intersection-observer\";import NoticeList from\"../elements/NoticeList\";import{history}from\"../redux/configureStore\";import{actionsCreators as searchActions}from\"../redux/modules/serch\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SearchResult=function SearchResult(){var dispatch=useDispatch();var search_type=useParams().keyword.split(\"_\")[0];var search_keyword=useParams().keyword.split(\"_\")[1];var tag_list=useSelector(function(state){return state.search.tag_list;});var serch_list=useSelector(function(state){return state.search.serch_list;});var category_list=useSelector(function(state){return state.search.category_list;});var postList=search_type===\"tag\"?tag_list:search_type===\"serch\"?serch_list:category_list;var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isLoaded=_React$useState2[0],setIsLoaded=_React$useState2[1];var _React$useState3=React.useState(1),_React$useState4=_slicedToArray(_React$useState3,2),pageNum=_React$useState4[0],setPageNum=_React$useState4[1];var _React$useState5=React.useState(1),_React$useState6=_slicedToArray(_React$useState5,2),pageNum1=_React$useState6[0],setPageNum1=_React$useState6[1];var _React$useState7=React.useState(1),_React$useState8=_slicedToArray(_React$useState7,2),pageNum2=_React$useState8[0],setPageNum2=_React$useState8[1];var _useInView=useInView({threshold:0.4}),_useInView2=_slicedToArray(_useInView,2),ref=_useInView2[0],inView=_useInView2[1];React.useEffect(function(){switch(search_type){case\"tag\":return dispatch(searchActions.tagDB(search_keyword,pageNum));case\"serch\":return dispatch(searchActions.serchDB(search_keyword,pageNum1));case\"category\":return dispatch(searchActions.categoryDB(search_keyword,pageNum2));default:return null;}},[search_keyword,pageNum,pageNum1,pageNum2]);var getMoreItem=function getMoreItem(){switch(search_type){case\"tag\":setPageNum(pageNum+1);case\"serch\":setPageNum1(pageNum1+1);case\"category\":setPageNum2(pageNum2+1);default:return null;}};React.useEffect(function(){if(inView){getMoreItem();}},[inView]);return/*#__PURE__*/_jsxs(Container,{children:[postList.map(function(v,idx){var lastEl=idx===postList.length-1;return/*#__PURE__*/_jsx(NoticeList,{list:v,lastEl:lastEl,viewRef:ref},idx);}),postList.length===0&&/*#__PURE__*/_jsxs(NoSearch,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uAC80\\uC0C9 \\uACB0\\uACFC\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4 :)\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){history.replace(\"/\");},children:\"\\uB418\\uB3CC\\uC544\\uAC00\\uAE30\"})]})]});};var NoSearch=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  padding: 200px;\\n  min-height: calc(100vh - 250px);\\n  text-align: center;\\n\\n  h2 {\\n    font-size: 30px;\\n    font-weight: 700;\\n  }\\n\\n  button {\\n    margin-top: 40px;\\n    padding: 16px 40px;\\n    background-color: #ddd;\\n    border-radius: 8px;\\n    color: #fff;\\n    transition: all 0.4s;\\n\\n    &:hover {\\n      background-color: #7966ff;\\n    }\\n  }\\n\"])));var Container=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  width: 1440px;\\n  min-height: calc(100vh - 100px - 150px);\\n  margin: auto;\\n\"])));export default SearchResult;","map":{"version":3,"sources":["/Users/cyj/sun/src/page/SearchResult.js"],"names":["React","styled","useParams","useSelector","useDispatch","useInView","NoticeList","history","actionsCreators","searchActions","SearchResult","dispatch","search_type","keyword","split","search_keyword","tag_list","state","search","serch_list","category_list","postList","useState","isLoaded","setIsLoaded","pageNum","setPageNum","pageNum1","setPageNum1","pageNum2","setPageNum2","threshold","ref","inView","useEffect","tagDB","serchDB","categoryDB","getMoreItem","map","v","idx","lastEl","length","replace","NoSearch","div","Container"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport styled from \"styled-components\";\nimport { useParams } from \"react-router\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useInView } from \"react-intersection-observer\";\nimport NoticeList from \"../elements/NoticeList\";\nimport { history } from \"../redux/configureStore\";\nimport { actionsCreators as searchActions } from \"../redux/modules/serch\";\n\nconst SearchResult = () => {\n  const dispatch = useDispatch();\n  const search_type = useParams().keyword.split(\"_\")[0];\n  const search_keyword = useParams().keyword.split(\"_\")[1];\n  const tag_list = useSelector((state) => state.search.tag_list);\n  const serch_list = useSelector((state) => state.search.serch_list);\n  const category_list = useSelector((state) => state.search.category_list);\n  const postList =\n    search_type === \"tag\"\n      ? tag_list\n      : search_type === \"serch\"\n      ? serch_list\n      : category_list;\n  const [isLoaded, setIsLoaded] = React.useState(false);\n  const [pageNum, setPageNum] = React.useState(1);\n  const [pageNum1, setPageNum1] = React.useState(1);\n  const [pageNum2, setPageNum2] = React.useState(1);\n  const [ref, inView] = useInView({\n    threshold: 0.4,\n  });\n\n  React.useEffect(() => {\n    switch (search_type) {\n      case \"tag\":\n        return dispatch(searchActions.tagDB(search_keyword, pageNum));\n      case \"serch\":\n        return dispatch(searchActions.serchDB(search_keyword, pageNum1));\n      case \"category\":\n        return dispatch(searchActions.categoryDB(search_keyword, pageNum2));\n      default:\n        return null;\n    }\n  }, [search_keyword, pageNum, pageNum1, pageNum2]);\n\n  const getMoreItem = () => {\n    switch (search_type) {\n      case \"tag\":\n        setPageNum(pageNum + 1);\n      case \"serch\":\n        setPageNum1(pageNum1 + 1);\n      case \"category\":\n        setPageNum2(pageNum2 + 1);\n      default:\n        return null;\n    }\n  };\n\n  React.useEffect(() => {\n    if (inView) {\n      getMoreItem();\n    }\n  }, [inView]);\n\n  return (\n    <Container>\n      {postList.map((v, idx) => {\n        const lastEl = idx === postList.length - 1;\n        return <NoticeList key={idx} list={v} lastEl={lastEl} viewRef={ref} />;\n      })}\n\n      {postList.length === 0 && (\n        <NoSearch>\n          <h2>검색 결과가 없습니다 :)</h2>\n          <button\n            onClick={() => {\n              history.replace(\"/\");\n            }}>\n            되돌아가기\n          </button>\n        </NoSearch>\n      )}\n    </Container>\n  );\n};\nconst NoSearch = styled.div`\n  padding: 200px;\n  min-height: calc(100vh - 250px);\n  text-align: center;\n\n  h2 {\n    font-size: 30px;\n    font-weight: 700;\n  }\n\n  button {\n    margin-top: 40px;\n    padding: 16px 40px;\n    background-color: #ddd;\n    border-radius: 8px;\n    color: #fff;\n    transition: all 0.4s;\n\n    &:hover {\n      background-color: #7966ff;\n    }\n  }\n`;\nconst Container = styled.div`\n  width: 1440px;\n  min-height: calc(100vh - 100px - 150px);\n  margin: auto;\n`;\nexport default SearchResult;\n"]},"metadata":{},"sourceType":"module"}