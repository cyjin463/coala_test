{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/cyj/sun/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";import _slicedToArray from\"/Users/cyj/sun/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _templateObject;import React from\"react\";import styled from\"styled-components\";import{ReactComponent as ImgSvg}from\"../svg/img.svg\";import{useLocation}from\"react-router\";import{useDispatch}from\"react-redux\";import{actionCreators as postActions}from\"../redux/modules/post\";import{actionCreators as answerActions}from\"../redux/modules/answer\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ImgUpload=function ImgUpload(_ref){var _ref$isEdit=_ref.isEdit,isEdit=_ref$isEdit===void 0?null:_ref$isEdit,_ref$editImg=_ref.editImg,editImg=_ref$editImg===void 0?null:_ref$editImg,_ref$cleanImg=_ref.cleanImg,cleanImg=_ref$cleanImg===void 0?null:_ref$cleanImg;var dispatch=useDispatch();var fileInput=React.useRef();var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),preImg=_React$useState2[0],setPreImg=_React$useState2[1];var location=useLocation();var pathName=location.pathname.indexOf(\"/detail\")>=0;React.useEffect(function(){if(cleanImg===\"\"){fileInput.current.value=\"\";setPreImg(\"\");}},[cleanImg]);var onChange=function onChange(e){var file=fileInput.current.files[0];var reader=new FileReader();reader.readAsDataURL(file);reader.onloadend=function(){setPreImg(reader.result);};if(pathName){dispatch(answerActions.asImgPost(file));}else{dispatch(postActions.imgPost(file));}};if(isEdit){return/*#__PURE__*/_jsxs(ImgWrap,{className:\"img_load\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"editImg\",children:[/*#__PURE__*/_jsx(ImgSvg,{className:\"icon\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\uCCA8\\uBD80\\uD558\\uAE30\"})]}),/*#__PURE__*/_jsx(\"input\",{onChange:onChange,id:\"editImg\",type:\"file\",ref:fileInput}),/*#__PURE__*/_jsx(\"div\",{className:\"img_box\",children:/*#__PURE__*/_jsx(\"img\",{src:preImg?preImg:editImg})})]});}return/*#__PURE__*/_jsxs(ImgWrap,{className:\"img_load\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"img\",children:[/*#__PURE__*/_jsx(ImgSvg,{className:\"icon\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\uC774\\uBBF8\\uC9C0 \\uCCA8\\uBD80\\uD558\\uAE30\"})]}),/*#__PURE__*/_jsx(\"input\",{onChange:onChange,id:\"img\",type:\"file\",ref:fileInput}),preImg&&/*#__PURE__*/_jsx(\"div\",{className:\"img_box\",children:/*#__PURE__*/_jsx(\"img\",{src:preImg})})]});};var ImgWrap=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: flex;\\n  gap: 24px;\\n  width: 100%;\\n  font-weight: 700;\\n  border-bottom: solid 1px #ccc;\\n\\n  .img_box {\\n    flex: auto;\\n  }\\n\\n  > label {\\n    flex: none;\\n    display: flex;\\n    align-items: center;\\n    padding: 24px;\\n    cursor: pointer;\\n  }\\n\\n  input {\\n    display: none !important;\\n  }\\n\\n  svg {\\n    display: inline-block;\\n    fill: #797979;\\n    width: 24px;\\n    height: 24px;\\n    margin-right: 8px;\\n  }\\n\\n  span {\\n    color: #797979;\\n  }\\n\\n  img {\\n    max-width: 100%;\\n  }\\n\"])));export default ImgUpload;","map":{"version":3,"sources":["/Users/cyj/sun/src/components/ImgUpload.js"],"names":["React","styled","ReactComponent","ImgSvg","useLocation","useDispatch","actionCreators","postActions","answerActions","ImgUpload","isEdit","editImg","cleanImg","dispatch","fileInput","useRef","useState","preImg","setPreImg","location","pathName","pathname","indexOf","useEffect","current","value","onChange","e","file","files","reader","FileReader","readAsDataURL","onloadend","result","asImgPost","imgPost","ImgWrap","div"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport styled from \"styled-components\";\nimport { ReactComponent as ImgSvg } from \"../svg/img.svg\";\nimport { useLocation } from \"react-router\";\nimport { useDispatch } from \"react-redux\";\nimport { actionCreators as postActions } from \"../redux/modules/post\";\nimport { actionCreators as answerActions } from \"../redux/modules/answer\";\n\nconst ImgUpload = ({ isEdit = null, editImg = null, cleanImg = null }) => {\n  const dispatch = useDispatch();\n  const fileInput = React.useRef();\n  const [preImg, setPreImg] = React.useState(\"\");\n  const location = useLocation();\n  const pathName = location.pathname.indexOf(\"/detail\") >= 0;\n\n  React.useEffect(() => {\n    if (cleanImg === \"\") {\n      fileInput.current.value = \"\";\n      setPreImg(\"\");\n    }\n  }, [cleanImg]);\n\n  const onChange = (e) => {\n    const file = fileInput.current.files[0];\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onloadend = () => {\n      setPreImg(reader.result);\n    };\n\n    if (pathName) {\n      dispatch(answerActions.asImgPost(file));\n    } else {\n      dispatch(postActions.imgPost(file));\n    }\n  };\n\n  if (isEdit) {\n    return (\n      <ImgWrap className='img_load'>\n        <label htmlFor='editImg'>\n          <ImgSvg className='icon' />\n          <span>첨부하기</span>\n        </label>\n        <input onChange={onChange} id='editImg' type='file' ref={fileInput} />\n        <div className='img_box'>\n          <img src={preImg ? preImg : editImg} />\n        </div>\n      </ImgWrap>\n    );\n  }\n\n  return (\n    <ImgWrap className='img_load'>\n      <label htmlFor='img'>\n        <ImgSvg className='icon' />\n        <span>이미지 첨부하기</span>\n      </label>\n      <input onChange={onChange} id='img' type='file' ref={fileInput} />\n      {preImg && (\n        <div className='img_box'>\n          <img src={preImg} />\n        </div>\n      )}\n    </ImgWrap>\n  );\n};\n\nconst ImgWrap = styled.div`\n  display: flex;\n  gap: 24px;\n  width: 100%;\n  font-weight: 700;\n  border-bottom: solid 1px #ccc;\n\n  .img_box {\n    flex: auto;\n  }\n\n  > label {\n    flex: none;\n    display: flex;\n    align-items: center;\n    padding: 24px;\n    cursor: pointer;\n  }\n\n  input {\n    display: none !important;\n  }\n\n  svg {\n    display: inline-block;\n    fill: #797979;\n    width: 24px;\n    height: 24px;\n    margin-right: 8px;\n  }\n\n  span {\n    color: #797979;\n  }\n\n  img {\n    max-width: 100%;\n  }\n`;\n\nexport default ImgUpload;\n"]},"metadata":{},"sourceType":"module"}