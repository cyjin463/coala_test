{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/cyj/sun/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";import _slicedToArray from\"/Users/cyj/sun/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5;import React,{useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import styled from\"styled-components\";import Profile from\"../elements/Profile\";import{actionCreators as userActions}from\"../redux/modules/user\";import img_down from\"../svg/arrow_down_b.svg\";import camera from\"../svg/camera_fill.svg\";import Swal from\"sweetalert2\";// import { ReactComponent as img_down } from \"../svg/arrow_down_b.svg\";\n// import { ReactComponent as camera } from \"../svg/camera_fill.svg\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var userNickname=sessionStorage.getItem(\"nickname\");var userCareer=sessionStorage.getItem(\"career\");var userImage=sessionStorage.getItem(\"userImage\");var userURL=sessionStorage.getItem(\"url\");var uid=sessionStorage.getItem(\"uid\");var Edituser=function Edituser(props){var dispatch=useDispatch();var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isCheckNickname=_React$useState2[0],setIsCheckNickname=_React$useState2[1];var _useState=useState(userNickname),_useState2=_slicedToArray(_useState,2),nickname=_useState2[0],setNickname=_useState2[1];var _useState3=useState(userImage),_useState4=_slicedToArray(_useState3,2),userImg=_useState4[0],setUserImg=_useState4[1];var _useState5=useState(userURL),_useState6=_slicedToArray(_useState5,2),blogUrl=_useState6[0],setBlogUrl=_useState6[1];var _useState7=useState(userCareer),_useState8=_slicedToArray(_useState7,2),career=_useState8[0],setCareer=_useState8[1];var _useState9=useState(userCareer),_useState10=_slicedToArray(_useState9,2),careerSelect=_useState10[0],setCareerSelect=_useState10[1];var _React$useState3=React.useState(true),_React$useState4=_slicedToArray(_React$useState3,2),nicknameRuleCheck=_React$useState4[0],setNicknameRuleCheck=_React$useState4[1];var imgInput=React.useRef();var options=[{value:\"1년차 이내\",name:\"1년차 이내\"},{value:\"1~2년차\",name:\"1~2년차\"},{value:\"3~4년차\",name:\"3~4년차\"},{value:\"5년차 이상\",name:\"5년차 이상\"}];var nicknameRule=function nicknameRule(e){var rule=/^[ㄱ-ㅎ|ㅏ-ㅣ|가-힣A-Za-z0-9]{2,8}$/;var nick=e.target.value;setNickname(nick);rule.test(nick)?setNicknameRuleCheck(true):setNicknameRuleCheck(false);};var Check=function Check(){if(userNickname===nickname){setIsCheckNickname(true);Swal.fire(\"\",\"사용 가능합니다.\",\"success\");}else if(nicknameRuleCheck!==true){Swal.fire(\"\",\"닉네임 형식이 맞지 않습니다.\",\"error\");}check();};var check=function check(){if(nickname===\"\"){Swal.fire(\"\",\"닉네임이 공란입니다.\",\"error\");return;}dispatch(userActions.checkNicknameDB(nickname,false));setIsCheckNickname(true);};var url=function url(e){setBlogUrl(e.target.value);};////////////////////////////////////////사진 변경\nvar editImg=function editImg(){var img=imgInput.current.files[0];console.log(img);var imgReader=new FileReader();imgReader.readAsDataURL(img);imgReader.onloadend=function(){setUserImg(imgReader.result);};dispatch(userActions.imgPost(img));};//////////////////////////////////////////SAVE\nvar Save=function Save(){if(userNickname===nickname&&userCareer===career&&userImage===userImg&&userURL===blogUrl){Swal.fire(\"\",\"변경 사항이 없습니다.\",\"error\");return;}else if(nickname===\"\"){Swal.fire(\"\",\"닉네임이 공란입니다.\",\"error\");return;}else if(isCheckNickname===false){if(userNickname===nickname){setIsCheckNickname(true);}else{Swal.fire(\"\",\"중복체크를 해주세요\",\"error\");}return;}else if(userImg===userImage){Swal.fire({title:\"회원정보를 수정하시겠습니까?\",icon:\"warning\",showCancelButton:true,confirmButtonText:\"네 수정하겠습니다.\",confirmButtonColor:\"#7966FF\",cancelButtonText:\"아니오\",cancelTextColor:\"#7966FF\"}).then(function(result){if(result.isConfirmed){Swal.fire(\"\",\"회원정보가 수정 되었습니다.\",\"success\");dispatch(userActions.logEditDB(uid,nickname,career,blogUrl,userImg));}else if(result.dismiss===Swal.DismissReason.cancel){Swal.fire(\"\",\"수정이 취소 되었습니다 :)\",\"error\");}});return;}else if(userImg!==userImage){Swal.fire({title:\"회원정보를 수정하시겠습니까?\",icon:\"warning\",showCancelButton:true,confirmButtonText:\"네 수정하겠습니다.\",confirmButtonColor:\"#7966FF\",cancelButtonText:\"아니오\",cancelTextColor:\"#7966FF\"}).then(function(result){if(result.isConfirmed){Swal.fire(\"\",\"회원정보가 수정 되었습니다.\",\"success\");dispatch(userActions.logEditDB2(uid,nickname,career,blogUrl,userImg));}else if(result.dismiss===Swal.DismissReason.cancel){Swal.fire(\"\",\"수정이 취소 되었습니다 :)\",\"error\");}});return;}};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uD504\\uB85C\\uD544 \\uD3B8\\uC9D1\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"user\",children:[/*#__PURE__*/_jsxs(ProfileImg,{children:[/*#__PURE__*/_jsx(\"i\",{children:/*#__PURE__*/_jsx(Profile,{imgUrl:userImg,size:175})}),/*#__PURE__*/_jsx(\"input\",{id:\"profile\",type:\"file\",hidden:true,onChange:editImg,ref:imgInput}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"profile\",children:[/*#__PURE__*/_jsx(\"img\",{src:camera}),\"\\uC0AC\\uC9C4 \\uC5C5\\uB85C\\uB4DC\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(EditNickname,{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"\\uB2C9\\uB124\\uC784\",onChange:nicknameRule,value:nickname}),/*#__PURE__*/_jsx(\"button\",{className:\"check\",onClick:Check,children:\"\\uC911\\uBCF5\\uCCB4\\uD06C\"})]}),nickname.length>0&&!nicknameRuleCheck&&/*#__PURE__*/_jsx(\"span\",{className:\"rule\",children:\" *\\uB2C9\\uB124\\uC784 \\uD615\\uC2DD\\uC774 \\uB9DE\\uC9C0 \\uC54A\\uC2B5\\uB2C8\\uB2E4. \"})]})}),/*#__PURE__*/_jsx(EditBlog,{children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{className:\"blog\",placeholder:\"sns \\uACC4\\uC815 url \\uAE30\\uC785\",onChange:url,value:userURL===\"undefined\"?null:blogUrl})})}),/*#__PURE__*/_jsxs(EditCareer,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return setCareerSelect(!careerSelect);},children:career}),careerSelect===true?/*#__PURE__*/_jsx(\"ul\",{children:options.map(function(v,idx){return/*#__PURE__*/_jsx(\"li\",{onClick:function onClick(){setCareer(v.name);setCareerSelect(false);},children:v.name},idx);})}):null]}),/*#__PURE__*/_jsx(\"img\",{onClick:function onClick(){return setCareerSelect(!careerSelect);},src:img_down})]}),/*#__PURE__*/_jsx(\"button\",{className:\"save\",onClick:Save,children:\"\\uC800\\uC7A5\"})]})]})]});};var Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  width: 1440px;\\n  height: 830px;\\n  margin: auto;\\n  > div.title {\\n    width: 116px;\\n    height: 35px;\\n    font-size: 24px;\\n    font-weight: 600;\\n  }\\n  > div.user {\\n    width: 830px;\\n    height: 100%;\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    margin: auto;\\n    > div.container {\\n      width: 500px;\\n      height: 312px;\\n      margin: auto;\\n      display: flex;\\n      flex-direction: column;\\n      justify-content: space-between;\\n      > button {\\n        width: 100%;\\n        height: 72px;\\n        background-color: #5e45f2;\\n        color: white;\\n        border-radius: 0.5rem;\\n      }\\n    }\\n  }\\n\"])));var ProfileImg=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  width: 350px;\\n  height: 400px;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  align-items: center;\\n  > i {\\n    width: 175px;\\n    height: 175px;\\n    margin-bottom: 1.5rem;\\n  }\\n  > label {\\n    display: flex;\\n    width: 135px;\\n    height: 40px;\\n    padding: 0 8px;\\n    border: 2px solid #7966ff;\\n    border-radius: 0.5rem;\\n    font-size: 16px;\\n    font-weight: 600;\\n    justify-content: space-around;\\n    align-items: center;\\n    color: #7966ff;\\n  }\\n\"])));var EditNickname=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  width: 500px;\\n  height: 72px;\\n  display: flex;\\n  text-align: center;\\n  justify-content: space-between;\\n  display: flex;\\n  flex-direction: column;\\n  div {\\n    width: 100%;\\n    height: 72px;\\n    display: flex;\\n    flex-direction: column-reverse;\\n    > span.rule {\\n      color: red;\\n      font-size: 12px;\\n      position: absolute;\\n      justify-content: start;\\n      padding-left: 15px;\\n    }\\n    > div {\\n      width: 100%;\\n      height: 72px;\\n      display: flex;\\n      flex-direction: row;\\n      position: relative;\\n      justify-content: end;\\n      align-items: center;\\n      background-color: #f9f8ff;\\n      border-radius: 0.5rem;\\n      padding: 15px;\\n      > input {\\n        width: 100%;\\n        height: 72px;\\n        border-radius: 0.5rem;\\n        font-size: 16px;\\n        font-weight: 600;\\n        outline: 0;\\n        background-color: #f9f8ff;\\n      }\\n      > button {\\n        width: 76px;\\n        height: 32px;\\n        background-color: #7966ff;\\n        color: white;\\n        border-radius: 32px;\\n        position: absolute;\\n        margin-right: 20px;\\n      }\\n    }\\n  }\\n\"])));var EditBlog=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  width: 500px;\\n  > div {\\n    width: 100%;\\n    height: 72px;\\n    padding: 0 15px;\\n    background-color: #f9f8ff;\\n    border-radius: 0.5rem;\\n    > input {\\n      width: 100%;\\n      height: 72px;\\n      font-size: 16px;\\n      font-weight: 600;\\n      outline: 0;\\n      background-color: #f9f8ff;\\n    }\\n  }\\n\"])));var EditCareer=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  width: 500px;\\n  display: flex;\\n  position: relative;\\n  justify-content: end;\\n  align-items: center;\\n  div {\\n    width: 100%;\\n    display: flex;\\n    flex-direction: column;\\n    > span {\\n      width: 100%;\\n      height: 72px;\\n      line-height: 72px;\\n      padding: 0 16px;\\n      border-radius: 8px;\\n      background-color: #f9f8ff;\\n      cursor: pointer;\\n      color: #7966ff;\\n      font-size: 16px;\\n      font-weight: 600;\\n    }\\n    > ul {\\n      width: 100%;\\n      height: 72px;\\n      border-radius: 0.5rem;\\n      border: 0px;\\n      position: absolute;\\n      margin-top: 80px;\\n      > li {\\n        display: flex;\\n        width: 100%;\\n        height: 72px;\\n        font-size: 16px;\\n        font-weight: 600;\\n        padding-left: 10px;\\n        background-color: #f9f8ff;\\n        align-items: center;\\n        justify-content: start;\\n        cursor: pointer;\\n        &:hover {\\n          background-color: #5e45f2;\\n          color: #f9f8ff;\\n        }\\n      }\\n    }\\n  }\\n  > img {\\n    width: 50px;\\n    height: 50px;\\n    position: absolute;\\n  }\\n\"])));export default Edituser;","map":{"version":3,"sources":["/Users/cyj/sun/src/page/Edituser.js"],"names":["React","useState","useDispatch","useSelector","styled","Profile","actionCreators","userActions","img_down","camera","Swal","userNickname","sessionStorage","getItem","userCareer","userImage","userURL","uid","Edituser","props","dispatch","isCheckNickname","setIsCheckNickname","nickname","setNickname","userImg","setUserImg","blogUrl","setBlogUrl","career","setCareer","careerSelect","setCareerSelect","nicknameRuleCheck","setNicknameRuleCheck","imgInput","useRef","options","value","name","nicknameRule","e","rule","nick","target","test","Check","fire","check","checkNicknameDB","url","editImg","img","current","files","console","log","imgReader","FileReader","readAsDataURL","onloadend","result","imgPost","Save","title","icon","showCancelButton","confirmButtonText","confirmButtonColor","cancelButtonText","cancelTextColor","then","isConfirmed","logEditDB","dismiss","DismissReason","cancel","logEditDB2","length","map","v","idx","Container","div","ProfileImg","EditNickname","EditBlog","EditCareer"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport styled from \"styled-components\";\nimport Profile from \"../elements/Profile\";\nimport { actionCreators as userActions } from \"../redux/modules/user\";\nimport img_down from \"../svg/arrow_down_b.svg\";\nimport camera from \"../svg/camera_fill.svg\";\nimport Swal from \"sweetalert2\";\n// import { ReactComponent as img_down } from \"../svg/arrow_down_b.svg\";\n// import { ReactComponent as camera } from \"../svg/camera_fill.svg\";\n\nconst userNickname = sessionStorage.getItem(\"nickname\");\nconst userCareer = sessionStorage.getItem(\"career\");\nconst userImage = sessionStorage.getItem(\"userImage\");\nconst userURL = sessionStorage.getItem(\"url\");\nconst uid = sessionStorage.getItem(\"uid\");\n\nconst Edituser = (props) => {\n  const dispatch = useDispatch();\n  const [isCheckNickname, setIsCheckNickname] = React.useState(false);\n  const [nickname, setNickname] = useState(userNickname);\n  const [userImg, setUserImg] = useState(userImage);\n  const [blogUrl, setBlogUrl] = useState(userURL);\n  const [career, setCareer] = useState(userCareer);\n  const [careerSelect, setCareerSelect] = useState(userCareer);\n  const [nicknameRuleCheck, setNicknameRuleCheck] = React.useState(true);\n  const imgInput = React.useRef();\n  const options = [\n    { value: \"1년차 이내\", name: \"1년차 이내\" },\n    { value: \"1~2년차\", name: \"1~2년차\" },\n    { value: \"3~4년차\", name: \"3~4년차\" },\n    { value: \"5년차 이상\", name: \"5년차 이상\" },\n  ];\n\n  const nicknameRule = (e) => {\n    const rule = /^[ㄱ-ㅎ|ㅏ-ㅣ|가-힣A-Za-z0-9]{2,8}$/;\n    const nick = e.target.value;\n    setNickname(nick);\n    rule.test(nick) ? setNicknameRuleCheck(true) : setNicknameRuleCheck(false);\n  };\n\n  const Check = () => {\n    if (userNickname === nickname) {\n      setIsCheckNickname(true);\n      Swal.fire(\"\", \"사용 가능합니다.\", \"success\");\n    } else if (nicknameRuleCheck !== true) {\n      Swal.fire(\"\", \"닉네임 형식이 맞지 않습니다.\", \"error\");\n    }\n    check();\n  };\n\n  const check = () => {\n    if (nickname === \"\") {\n      Swal.fire(\"\", \"닉네임이 공란입니다.\", \"error\");\n      return;\n    }\n    dispatch(userActions.checkNicknameDB(nickname, false));\n    setIsCheckNickname(true);\n  };\n\n  const url = (e) => {\n    setBlogUrl(e.target.value);\n  };\n\n  ////////////////////////////////////////사진 변경\n  const editImg = () => {\n    const img = imgInput.current.files[0];\n    console.log(img);\n    const imgReader = new FileReader();\n    imgReader.readAsDataURL(img);\n    imgReader.onloadend = () => {\n      setUserImg(imgReader.result);\n    };\n    dispatch(userActions.imgPost(img));\n  };\n  //////////////////////////////////////////SAVE\n\n  const Save = () => {\n    if (\n      userNickname === nickname &&\n      userCareer === career &&\n      userImage === userImg &&\n      userURL === blogUrl\n    ) {\n      Swal.fire(\"\", \"변경 사항이 없습니다.\", \"error\");\n      return;\n    } else if (nickname === \"\") {\n      Swal.fire(\"\", \"닉네임이 공란입니다.\", \"error\");\n      return;\n    } else if (isCheckNickname === false) {\n      if (userNickname === nickname) {\n        setIsCheckNickname(true);\n      } else {\n        Swal.fire(\"\", \"중복체크를 해주세요\", \"error\");\n      }\n      return;\n    } else if (userImg === userImage) {\n      Swal.fire({\n        title: \"회원정보를 수정하시겠습니까?\",\n        icon: \"warning\",\n        showCancelButton: true,\n        confirmButtonText: \"네 수정하겠습니다.\",\n        confirmButtonColor: \"#7966FF\",\n        cancelButtonText: \"아니오\",\n        cancelTextColor: \"#7966FF\",\n      }).then((result) => {\n        if (result.isConfirmed) {\n          Swal.fire(\"\", \"회원정보가 수정 되었습니다.\", \"success\");\n          dispatch(\n            userActions.logEditDB(uid, nickname, career, blogUrl, userImg)\n          );\n        } else if (result.dismiss === Swal.DismissReason.cancel) {\n          Swal.fire(\"\", \"수정이 취소 되었습니다 :)\", \"error\");\n        }\n      });\n      return;\n    } else if (userImg !== userImage) {\n      Swal.fire({\n        title: \"회원정보를 수정하시겠습니까?\",\n        icon: \"warning\",\n        showCancelButton: true,\n        confirmButtonText: \"네 수정하겠습니다.\",\n        confirmButtonColor: \"#7966FF\",\n        cancelButtonText: \"아니오\",\n        cancelTextColor: \"#7966FF\",\n      }).then((result) => {\n        if (result.isConfirmed) {\n          Swal.fire(\"\", \"회원정보가 수정 되었습니다.\", \"success\");\n          dispatch(\n            userActions.logEditDB2(uid, nickname, career, blogUrl, userImg)\n          );\n        } else if (result.dismiss === Swal.DismissReason.cancel) {\n          Swal.fire(\"\", \"수정이 취소 되었습니다 :)\", \"error\");\n        }\n      });\n      return;\n    }\n  };\n\n  return (\n    <Container>\n      <div className='title'>프로필 편집</div>\n      <div className='user'>\n        <ProfileImg>\n          <i>\n            <Profile imgUrl={userImg} size={175} />\n          </i>\n          <input\n            id='profile'\n            type='file'\n            hidden={true}\n            onChange={editImg}\n            ref={imgInput}\n          />\n          <label htmlFor='profile'>\n            <img src={camera} />\n            사진 업로드\n          </label>\n        </ProfileImg>\n        <div className='container'>\n          <EditNickname>\n            <div>\n              <div>\n                <input\n                  placeholder='닉네임'\n                  onChange={nicknameRule}\n                  value={nickname}></input>\n                <button className='check' onClick={Check}>\n                  중복체크\n                </button>\n              </div>\n              {nickname.length > 0 && !nicknameRuleCheck && (\n                <span className='rule'> *닉네임 형식이 맞지 않습니다. </span>\n              )}\n            </div>\n          </EditNickname>\n\n          <EditBlog>\n            <div>\n              <input\n                className='blog'\n                placeholder='sns 계정 url 기입'\n                onChange={url}\n                value={userURL === \"undefined\" ? null : blogUrl}></input>\n            </div>\n          </EditBlog>\n          <EditCareer>\n            <div>\n              <span onClick={() => setCareerSelect(!careerSelect)}>\n                {career}\n              </span>\n              {careerSelect === true ? (\n                <ul>\n                  {options.map((v, idx) => (\n                    <li\n                      key={idx}\n                      onClick={() => {\n                        setCareer(v.name);\n                        setCareerSelect(false);\n                      }}>\n                      {v.name}\n                    </li>\n                  ))}\n                </ul>\n              ) : null}\n            </div>\n            <img\n              onClick={() => setCareerSelect(!careerSelect)}\n              src={img_down}></img>\n          </EditCareer>\n          <button className='save' onClick={Save}>\n            저장\n          </button>\n        </div>\n      </div>\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  width: 1440px;\n  height: 830px;\n  margin: auto;\n  > div.title {\n    width: 116px;\n    height: 35px;\n    font-size: 24px;\n    font-weight: 600;\n  }\n  > div.user {\n    width: 830px;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    margin: auto;\n    > div.container {\n      width: 500px;\n      height: 312px;\n      margin: auto;\n      display: flex;\n      flex-direction: column;\n      justify-content: space-between;\n      > button {\n        width: 100%;\n        height: 72px;\n        background-color: #5e45f2;\n        color: white;\n        border-radius: 0.5rem;\n      }\n    }\n  }\n`;\nconst ProfileImg = styled.div`\n  width: 350px;\n  height: 400px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  > i {\n    width: 175px;\n    height: 175px;\n    margin-bottom: 1.5rem;\n  }\n  > label {\n    display: flex;\n    width: 135px;\n    height: 40px;\n    padding: 0 8px;\n    border: 2px solid #7966ff;\n    border-radius: 0.5rem;\n    font-size: 16px;\n    font-weight: 600;\n    justify-content: space-around;\n    align-items: center;\n    color: #7966ff;\n  }\n`;\n\nconst EditNickname = styled.div`\n  width: 500px;\n  height: 72px;\n  display: flex;\n  text-align: center;\n  justify-content: space-between;\n  display: flex;\n  flex-direction: column;\n  div {\n    width: 100%;\n    height: 72px;\n    display: flex;\n    flex-direction: column-reverse;\n    > span.rule {\n      color: red;\n      font-size: 12px;\n      position: absolute;\n      justify-content: start;\n      padding-left: 15px;\n    }\n    > div {\n      width: 100%;\n      height: 72px;\n      display: flex;\n      flex-direction: row;\n      position: relative;\n      justify-content: end;\n      align-items: center;\n      background-color: #f9f8ff;\n      border-radius: 0.5rem;\n      padding: 15px;\n      > input {\n        width: 100%;\n        height: 72px;\n        border-radius: 0.5rem;\n        font-size: 16px;\n        font-weight: 600;\n        outline: 0;\n        background-color: #f9f8ff;\n      }\n      > button {\n        width: 76px;\n        height: 32px;\n        background-color: #7966ff;\n        color: white;\n        border-radius: 32px;\n        position: absolute;\n        margin-right: 20px;\n      }\n    }\n  }\n`;\n\nconst EditBlog = styled.div`\n  width: 500px;\n  > div {\n    width: 100%;\n    height: 72px;\n    padding: 0 15px;\n    background-color: #f9f8ff;\n    border-radius: 0.5rem;\n    > input {\n      width: 100%;\n      height: 72px;\n      font-size: 16px;\n      font-weight: 600;\n      outline: 0;\n      background-color: #f9f8ff;\n    }\n  }\n`;\n\nconst EditCareer = styled.div`\n  width: 500px;\n  display: flex;\n  position: relative;\n  justify-content: end;\n  align-items: center;\n  div {\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    > span {\n      width: 100%;\n      height: 72px;\n      line-height: 72px;\n      padding: 0 16px;\n      border-radius: 8px;\n      background-color: #f9f8ff;\n      cursor: pointer;\n      color: #7966ff;\n      font-size: 16px;\n      font-weight: 600;\n    }\n    > ul {\n      width: 100%;\n      height: 72px;\n      border-radius: 0.5rem;\n      border: 0px;\n      position: absolute;\n      margin-top: 80px;\n      > li {\n        display: flex;\n        width: 100%;\n        height: 72px;\n        font-size: 16px;\n        font-weight: 600;\n        padding-left: 10px;\n        background-color: #f9f8ff;\n        align-items: center;\n        justify-content: start;\n        cursor: pointer;\n        &:hover {\n          background-color: #5e45f2;\n          color: #f9f8ff;\n        }\n      }\n    }\n  }\n  > img {\n    width: 50px;\n    height: 50px;\n    position: absolute;\n  }\n`;\n\nexport default Edituser;\n"]},"metadata":{},"sourceType":"module"}