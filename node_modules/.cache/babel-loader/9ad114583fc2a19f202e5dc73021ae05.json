{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/cyj/sun/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";import _objectSpread from\"/Users/cyj/sun/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/cyj/sun/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _templateObject,_templateObject2,_templateObject3;import React from\"react\";import styled from\"styled-components\";import{useParams}from\"react-router\";import{useDispatch,useSelector}from\"react-redux\";import{actionCreators as answerActions}from\"../redux/modules/answer\";import{actionCreators as commentActions}from\"../redux/modules/comment\";import Comment from\"./Comment\";import Answer from\"./Answer\";import Profile from\"../elements/Profile\";import Swal from\"sweetalert2\";import RoundBtn from\"../elements/RoundBtn\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AnswerList=function AnswerList(_ref){var isWriter=_ref.isWriter;var pid=useParams().pid;var dispatch=useDispatch();var list=useSelector(function(state){return state.answer.list;});var user_info=sessionStorage.getItem(\"uid\");var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),isEdit=_React$useState2[0],setIsEdit=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isCommentEdit=_React$useState4[0],setIsCommentEdit=_React$useState4[1];var _React$useState5=React.useState(\"\"),_React$useState6=_slicedToArray(_React$useState5,2),comment=_React$useState6[0],setComment=_React$useState6[1];var _React$useState7=React.useState(\"\"),_React$useState8=_slicedToArray(_React$useState7,2),commentView=_React$useState8[0],setCommentView=_React$useState8[1];var _React$useState9=React.useState(false),_React$useState10=_slicedToArray(_React$useState9,2),commentViewSelect=_React$useState10[0],setCommentViewSelect=_React$useState10[1];var _React$useState11=React.useState(0),_React$useState12=_slicedToArray(_React$useState11,2),commentId=_React$useState12[0],setCommentId=_React$useState12[1];var isChoose=list===null||list===void 0?void 0:list.find(function(v){return v.status===\"true\";});React.useEffect(function(){if(list.length<=1){return;}dispatch(answerActions.getAnswerDB(pid));},[]);var chooseAnswer=function chooseAnswer(choose_list){if(!isChoose){Swal.fire({title:\"답변을 채택하시겠습니까?\",text:\"한번 채택한 답변은 취소 할 수 없습니다\",icon:\"warning\",showCancelButton:true,confirmButtonText:\"네 채택하겠습니다.\",confirmButtonColor:\"#7966FF\",cancelButtonText:\"아니오\"}).then(function(result){if(result.isConfirmed){Swal.fire(\"\",\"답변이 채택 되었습니다.\",\"success\");dispatch(answerActions.chooseAnswerDB(_objectSpread(_objectSpread({},choose_list),{},{answerUid:choose_list.uid})));}else if(result.dismiss===Swal.DismissReason.cancel){Swal.fire(\"\",\"채택이 취소 되었습니다 :)\",\"error\");}});}else{Swal.fire({title:\"\",text:\"채택 된 답변이 존재합니다. :)\",icon:\"warning\",confirmButtonText:\"확인\",confirmButtonColor:\"#7966FF\"});}};var deleAnswer=function deleAnswer(answerId){Swal.fire({title:\"답변을 삭제하시겠습니까?\",text:\"삭제 된 답변은 복구 할 수 없습니다\",icon:\"warning\",showCancelButton:true,confirmButtonText:\"네 삭제하겠습니다.\",confirmButtonColor:\"#7966FF\",cancelButtonText:\"아니오\"}).then(function(result){if(result.isConfirmed){Swal.fire(\"\",\"답변이 삭제 되었습니다.\",\"success\");dispatch(answerActions.delAnswerDB(answerId));}else if(result.dismiss===Swal.DismissReason.cancel){Swal.fire(\"\",\"취소 되었습니다 :)\",\"error\");}});};var commentViewList=function commentViewList(pid){setCommentView(pid);if(commentView===\"\"){setCommentViewSelect(!commentViewSelect);}else if(commentView===pid){setCommentViewSelect(!commentViewSelect);}else if(commentView!==pid){setCommentViewSelect(\"true\");}};var setCommentEdit=function setCommentEdit(commentId){setCommentId(commentId);};var commentChange=function commentChange(e){setComment(e.target.value);};var commentEdit=function commentEdit(e){var commentEditId=e.target.value;Swal.fire({title:\"댓글을 수정하시겠습니까?\",icon:\"warning\",showCancelButton:true,confirmButtonText:\"네\",confirmButtonColor:\"#7966FF\",cancelButtonText:\"아니오\",Buttons:true}).then(function(result){if(result.isConfirmed){dispatch(commentActions.editCommentDB(commentEditId,comment,pid));}else{return;}});};var commentDelete=function commentDelete(e){Swal.fire({title:\"댓글을 삭제하시겠습니까?\",icon:\"warning\",showCancelButton:true,confirmButtonText:\"네\",confirmButtonColor:\"#7966FF\",cancelButtonText:\"아니오\",Buttons:true}).then(function(result){if(result.isConfirmed){dispatch(commentActions.deleteCommentDB(e.target.value));}else{return;}});};return/*#__PURE__*/_jsx(SC_List,{children:list.map(function(v,idx){var comment_count=Object.keys(v.commnetResponseDtoList).length;console.log(v);return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"answer_wrap\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"answer_box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(Profile,{size:\"48\",imgUrl:v.userImage}),/*#__PURE__*/_jsx(\"span\",{children:v.nickname})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(\"div\",{children:v.answerTitle}),/*#__PURE__*/_jsx(\"p\",{children:v.answerComment}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:v.answerImg})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"btn_wrap\",children:[/*#__PURE__*/_jsxs(\"span\",{onClick:function onClick(){return commentViewList(v.answerId);},children:[\"\\uB313\\uAE00 \",comment_count]}),v.status===\"true\"?/*#__PURE__*/_jsx(\"button\",{className:\"choose\",children:\"\\uCC44\\uD0DD\"}):Number(user_info)===Number(v.uid)?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){deleAnswer(v.answerId);},children:\"\\uC0AD\\uC81C\"}),/*#__PURE__*/_jsx(\"button\",{className:\"edit_btn\",onClick:function onClick(){setIsEdit(v.answerId);},children:\"\\uC218\\uC815\"})]}):Number(user_info)===Number(isWriter)&&Number(isWriter)!==Number(v.uid)&&/*#__PURE__*/_jsx(RoundBtn,{isLine:true,title:\" \\uCC44\\uD0DD \",onClick:function onClick(){chooseAnswer(v);}})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"comment_box\",children:/*#__PURE__*/_jsx(SC_Commentbox,{className:\"comment\",children:/*#__PURE__*/_jsx(Comment,{list:v})})})]}),/*#__PURE__*/_jsx(SC_CommentList,{className:\"comment_wrap\",children:v.commnetResponseDtoList.map(function(list,idx){var _list$createdAt,_list$createdAt2,_list$createdAt3;return/*#__PURE__*/_jsx(\"div\",{children:commentViewSelect&&commentView===list.answerId&&/*#__PURE__*/_jsxs(_Fragment,{children:[user_info==list.uid&&/*#__PURE__*/_jsx(_Fragment,{children:isCommentEdit&&list.commentId===commentId?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mycomment\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Profile,{size:24,imgUrl:list.userImage}),/*#__PURE__*/_jsx(\"strong\",{children:list.nickname})]}),/*#__PURE__*/_jsx(\"div\",{className:\"button\",children:/*#__PURE__*/_jsx(\"button\",{className:\"comment\",onClick:commentEdit,value:list.commentId,children:\"\\uC218\\uC815\\uC644\\uB8CC\"})})]}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",onChange:commentChange,children:list.comment})}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",(_list$createdAt=list.createdAt)===null||_list$createdAt===void 0?void 0:_list$createdAt.split(\"T\")[0]]})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mycomment\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Profile,{size:24,imgUrl:list.userImage}),/*#__PURE__*/_jsx(\"strong\",{children:list.nickname})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"button\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"comment\",onClick:function onClick(){setCommentEdit(list.commentId);setIsCommentEdit(!isCommentEdit);},children:\"\\uC218\\uC815\"}),/*#__PURE__*/_jsx(\"button\",{className:\"comment\",onClick:commentDelete,value:list.commentId,children:\"\\uC0AD\\uC81C\"})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"comment\",children:list.comment}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",(_list$createdAt2=list.createdAt)===null||_list$createdAt2===void 0?void 0:_list$createdAt2.split(\"T\")[0]]})]})}),list.uid!=user_info&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comment\",children:[/*#__PURE__*/_jsx(Profile,{size:24,imgUrl:list.userImage}),/*#__PURE__*/_jsx(\"strong\",{children:list.nickname})]}),/*#__PURE__*/_jsx(\"p\",{className:\"comment\",children:list.comment}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",(_list$createdAt3=list.createdAt)===null||_list$createdAt3===void 0?void 0:_list$createdAt3.split(\"T\")[0]]})]})})]})},idx);})}),isEdit===v.answerId&&/*#__PURE__*/_jsx(Answer,{close:setIsEdit,isEdit:true,list:v})]})},idx);})});};var SC_List=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  .answer_wrap {\\n    padding: 24px;\\n    box-shadow: 0 4px 20px 0 rgba(228, 226, 242, 0.45);\\n    border-radius: 8px;\\n    overflow: hidden;\\n    margin-bottom: 24px;\\n  }\\n\\n  h2 {\\n    margin: 0;\\n  }\\n\\n  .comment_box {\\n    border-radius: 8px;\\n  }\\n\\n  .header {\\n    display: flex;\\n    align-items: center;\\n    gap: 8px;\\n\\n    button {\\n      margin-left: auto;\\n    }\\n\\n    span {\\n      font-size: 18px;\\n    }\\n  }\\n\\n  .content {\\n    padding: 24px 0;\\n\\n    > div {\\n      font-size: 20px;\\n      font-weight: 700;\\n    }\\n\\n    > *:not(style) {\\n      margin-bottom: 10px;\\n    }\\n  }\\n\\n  .btn_wrap {\\n    display: flex;\\n    padding-bottom: 16px;\\n\\n    span {\\n      margin-right: auto;\\n    }\\n\\n    button {\\n      color: #7966ff;\\n      font-size: 16px;\\n\\n      &.choose {\\n        width: 94px;\\n        height: 40px;\\n        background-color: #ffd703;\\n        color: #fff;\\n        border-radius: 40px;\\n        cursor: default;\\n      }\\n    }\\n\\n    .edit_btn:before {\\n      content: \\\"\\\";\\n      margin: 0 12px;\\n      border-left: solid 1px #7966ff;\\n    }\\n  }\\n\"])));var SC_Commentbox=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  padding-top: 24px;\\n  border-top: solid 1px #dadada;\\n\"])));var SC_CommentList=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  --gray-color: #c4c4c4;\\n\\n  > div {\\n    display: flex;\\n    padding: 18px 24px;\\n    border-bottom: solid 1px #dadada;\\n    color: var(--gray-color);\\n    flex-direction: column;\\n    justify-content: space-between;\\n\\n    &:last-child {\\n      border-bottom: none;\\n    }\\n  }\\n\\n  p {\\n    flex: auto;\\n    margin: 3px;\\n\\n    > textarea {\\n      width: 1000px;\\n      height: 100px;\\n    }\\n  }\\n\\n  p.comment {\\n    flex: auto;\\n    margin: 3px;\\n    height: 2rem;\\n    width: 100%;\\n    height: 100%;\\n    color: #797979;\\n\\n    > textarea {\\n      width: 100%;\\n      height: 100%;\\n    }\\n  }\\n\\n  strong {\\n    color: #333;\\n    font-weight: normal;\\n    margin-left: 8px;\\n  }\\n\\n  em {\\n    font-style: normal;\\n    padding-left: 16px;\\n    margin-left: 16px;\\n    border-left: solid 1px var(--gray-color);\\n  }\\n  div.mycomment {\\n    display: flex;\\n    justify-content: space-between;\\n    > div {\\n      display: flex;\\n      align-items: center;\\n      line-height: 1rem;\\n    }\\n    > div.button {\\n      width: 60px;\\n      justify-content: space-between;\\n    }\\n  }\\n  div.comment {\\n    display: flex;\\n    align-items: center;\\n  }\\n  button {\\n    color: var(--gray-color);\\n    font-size: 1rem;\\n  }\\n\"])));export default AnswerList;","map":{"version":3,"sources":["/Users/cyj/sun/src/components/AnswerList.js"],"names":["React","styled","useParams","useDispatch","useSelector","actionCreators","answerActions","commentActions","Comment","Answer","Profile","Swal","RoundBtn","AnswerList","isWriter","pid","dispatch","list","state","answer","user_info","sessionStorage","getItem","useState","isEdit","setIsEdit","isCommentEdit","setIsCommentEdit","comment","setComment","commentView","setCommentView","commentViewSelect","setCommentViewSelect","commentId","setCommentId","isChoose","find","v","status","useEffect","length","getAnswerDB","chooseAnswer","choose_list","fire","title","text","icon","showCancelButton","confirmButtonText","confirmButtonColor","cancelButtonText","then","result","isConfirmed","chooseAnswerDB","answerUid","uid","dismiss","DismissReason","cancel","deleAnswer","answerId","delAnswerDB","commentViewList","setCommentEdit","commentChange","e","target","value","commentEdit","commentEditId","Buttons","editCommentDB","commentDelete","deleteCommentDB","map","idx","comment_count","Object","keys","commnetResponseDtoList","console","log","userImage","nickname","answerTitle","answerComment","answerImg","Number","createdAt","split","SC_List","div","SC_Commentbox","SC_CommentList"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport styled from \"styled-components\";\nimport { useParams } from \"react-router\";\n\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { actionCreators as answerActions } from \"../redux/modules/answer\";\nimport { actionCreators as commentActions } from \"../redux/modules/comment\";\nimport Comment from \"./Comment\";\nimport Answer from \"./Answer\";\nimport Profile from \"../elements/Profile\";\nimport Swal from \"sweetalert2\";\nimport RoundBtn from \"../elements/RoundBtn\";\n\nconst AnswerList = ({ isWriter }) => {\n  const pid = useParams().pid;\n  const dispatch = useDispatch();\n  const list = useSelector((state) => state.answer.list);\n  const user_info = sessionStorage.getItem(\"uid\");\n  const [isEdit, setIsEdit] = React.useState(null);\n  const [isCommentEdit, setIsCommentEdit] = React.useState(false);\n  const [comment, setComment] = React.useState(\"\");\n  const [commentView, setCommentView] = React.useState(\"\");\n  const [commentViewSelect, setCommentViewSelect] = React.useState(false);\n  const [commentId, setCommentId] = React.useState(0);\n  const isChoose = list?.find((v) => v.status === \"true\");\n\n  React.useEffect(() => {\n    if (list.length <= 1) {\n      return;\n    }\n    dispatch(answerActions.getAnswerDB(pid));\n  }, []);\n\n  const chooseAnswer = (choose_list) => {\n    if (!isChoose) {\n      Swal.fire({\n        title: \"답변을 채택하시겠습니까?\",\n        text: \"한번 채택한 답변은 취소 할 수 없습니다\",\n        icon: \"warning\",\n        showCancelButton: true,\n        confirmButtonText: \"네 채택하겠습니다.\",\n        confirmButtonColor: \"#7966FF\",\n        cancelButtonText: \"아니오\",\n      }).then((result) => {\n        if (result.isConfirmed) {\n          Swal.fire(\"\", \"답변이 채택 되었습니다.\", \"success\");\n          dispatch(\n            answerActions.chooseAnswerDB({\n              ...choose_list,\n              answerUid: choose_list.uid,\n            })\n          );\n        } else if (result.dismiss === Swal.DismissReason.cancel) {\n          Swal.fire(\"\", \"채택이 취소 되었습니다 :)\", \"error\");\n        }\n      });\n    } else {\n      Swal.fire({\n        title: \"\",\n        text: \"채택 된 답변이 존재합니다. :)\",\n        icon: \"warning\",\n        confirmButtonText: \"확인\",\n        confirmButtonColor: \"#7966FF\",\n      });\n    }\n  };\n\n  const deleAnswer = (answerId) => {\n    Swal.fire({\n      title: \"답변을 삭제하시겠습니까?\",\n      text: \"삭제 된 답변은 복구 할 수 없습니다\",\n      icon: \"warning\",\n      showCancelButton: true,\n      confirmButtonText: \"네 삭제하겠습니다.\",\n      confirmButtonColor: \"#7966FF\",\n      cancelButtonText: \"아니오\",\n    }).then((result) => {\n      if (result.isConfirmed) {\n        Swal.fire(\"\", \"답변이 삭제 되었습니다.\", \"success\");\n        dispatch(answerActions.delAnswerDB(answerId));\n      } else if (result.dismiss === Swal.DismissReason.cancel) {\n        Swal.fire(\"\", \"취소 되었습니다 :)\", \"error\");\n      }\n    });\n  };\n\n  const commentViewList = (pid) => {\n    setCommentView(pid);\n    if (commentView === \"\") {\n      setCommentViewSelect(!commentViewSelect);\n    } else if (commentView === pid) {\n      setCommentViewSelect(!commentViewSelect);\n    } else if (commentView !== pid) {\n      setCommentViewSelect(\"true\");\n    }\n  };\n\n  const setCommentEdit = (commentId) => {\n    setCommentId(commentId);\n  };\n\n  const commentChange = (e) => {\n    setComment(e.target.value);\n  };\n\n  const commentEdit = (e) => {\n    const commentEditId = e.target.value;\n    Swal.fire({\n      title: \"댓글을 수정하시겠습니까?\",\n      icon: \"warning\",\n      showCancelButton: true,\n      confirmButtonText: \"네\",\n      confirmButtonColor: \"#7966FF\",\n      cancelButtonText: \"아니오\",\n      Buttons: true,\n    }).then((result) => {\n      if (result.isConfirmed) {\n        dispatch(commentActions.editCommentDB(commentEditId, comment, pid));\n      } else {\n        return;\n      }\n    });\n  };\n\n  const commentDelete = (e) => {\n    Swal.fire({\n      title: \"댓글을 삭제하시겠습니까?\",\n      icon: \"warning\",\n      showCancelButton: true,\n      confirmButtonText: \"네\",\n      confirmButtonColor: \"#7966FF\",\n      cancelButtonText: \"아니오\",\n      Buttons: true,\n    }).then((result) => {\n      if (result.isConfirmed) {\n        dispatch(commentActions.deleteCommentDB(e.target.value));\n      } else {\n        return;\n      }\n    });\n  };\n\n  return (\n    <SC_List>\n      {list.map((v, idx) => {\n        const comment_count = Object.keys(v.commnetResponseDtoList).length;\n        console.log(v);\n        return (\n          <React.Fragment key={idx}>\n            <div>\n              <div className='answer_wrap'>\n                <div className='answer_box'>\n                  <div className='header'>\n                    <Profile size='48' imgUrl={v.userImage} />\n                    <span>{v.nickname}</span>\n                  </div>\n                  <div className='content'>\n                    <div>{v.answerTitle}</div>\n                    <p>{v.answerComment}</p>\n                    <div>\n                      <img src={v.answerImg} />\n                    </div>\n                  </div>\n\n                  <div className='btn_wrap'>\n                    <span onClick={() => commentViewList(v.answerId)}>\n                      댓글 {comment_count}\n                    </span>\n                    {/* 채택 하기 , 수적 삭제, 채택된 상태 */}\n                    {v.status === \"true\" ? (\n                      <button className='choose'>채택</button>\n                    ) : Number(user_info) === Number(v.uid) ? (\n                      <>\n                        <button\n                          onClick={() => {\n                            deleAnswer(v.answerId);\n                          }}>\n                          삭제\n                        </button>\n                        <button\n                          className='edit_btn'\n                          onClick={() => {\n                            setIsEdit(v.answerId);\n                          }}>\n                          수정\n                        </button>\n                      </>\n                    ) : (\n                      Number(user_info) === Number(isWriter) &&\n                      Number(isWriter) !== Number(v.uid) && (\n                        <RoundBtn\n                          isLine\n                          title='\n                            채택\n                            '\n                          onClick={() => {\n                            chooseAnswer(v);\n                          }}\n                        />\n                      )\n                    )}\n                  </div>\n                </div>\n                <div className='comment_box'>\n                  <SC_Commentbox className='comment'>\n                    <Comment list={v} />\n                  </SC_Commentbox>\n                </div>\n              </div>\n\n              <SC_CommentList className='comment_wrap'>\n                {v.commnetResponseDtoList.map((list, idx) => {\n                  return (\n                    <div key={idx}>\n                      {commentViewSelect && commentView === list.answerId && (\n                        <>\n                          {user_info == list.uid && (\n                            <>\n                              {isCommentEdit && list.commentId === commentId ? (\n                                <div>\n                                  <div className='mycomment'>\n                                    <div>\n                                      <Profile\n                                        size={24}\n                                        imgUrl={list.userImage}\n                                      />\n                                      <strong>{list.nickname}</strong>\n                                    </div>\n                                    <div className='button'>\n                                      <button\n                                        className='comment'\n                                        onClick={commentEdit}\n                                        value={list.commentId}>\n                                        수정완료\n                                      </button>\n                                    </div>\n                                  </div>\n                                  <p>\n                                    <textarea\n                                      type='text'\n                                      onChange={commentChange}>\n                                      {list.comment}\n                                    </textarea>\n                                  </p>\n                                  <p> {list.createdAt?.split(\"T\")[0]}</p>\n                                </div>\n                              ) : (\n                                <div>\n                                  <div className='mycomment'>\n                                    <div>\n                                      <Profile\n                                        size={24}\n                                        imgUrl={list.userImage}\n                                      />\n                                      <strong>{list.nickname}</strong>\n                                    </div>\n                                    <div className='button'>\n                                      <button\n                                        className='comment'\n                                        onClick={() => {\n                                          setCommentEdit(list.commentId);\n                                          setIsCommentEdit(!isCommentEdit);\n                                        }}>\n                                        수정\n                                      </button>\n                                      <button\n                                        className='comment'\n                                        onClick={commentDelete}\n                                        value={list.commentId}>\n                                        삭제\n                                      </button>\n                                    </div>\n                                  </div>\n                                  <p className='comment'>{list.comment}</p>\n                                  <p> {list.createdAt?.split(\"T\")[0]}</p>\n                                </div>\n                              )}\n                            </>\n                          )}\n                          {list.uid != user_info && (\n                            <div>\n                              <div>\n                                <div className='comment'>\n                                  <Profile size={24} imgUrl={list.userImage} />\n                                  <strong>{list.nickname}</strong>\n                                </div>\n                                <p className='comment'>{list.comment}</p>\n                                <p> {list.createdAt?.split(\"T\")[0]}</p>\n                              </div>\n                            </div>\n                          )}\n                        </>\n                      )}\n                    </div>\n                  );\n                })}\n              </SC_CommentList>\n\n              {isEdit === v.answerId && (\n                <Answer close={setIsEdit} isEdit={true} list={v} />\n              )}\n            </div>\n          </React.Fragment>\n        );\n      })}\n    </SC_List>\n  );\n};\n\nconst SC_List = styled.div`\n  .answer_wrap {\n    padding: 24px;\n    box-shadow: 0 4px 20px 0 rgba(228, 226, 242, 0.45);\n    border-radius: 8px;\n    overflow: hidden;\n    margin-bottom: 24px;\n  }\n\n  h2 {\n    margin: 0;\n  }\n\n  .comment_box {\n    border-radius: 8px;\n  }\n\n  .header {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n\n    button {\n      margin-left: auto;\n    }\n\n    span {\n      font-size: 18px;\n    }\n  }\n\n  .content {\n    padding: 24px 0;\n\n    > div {\n      font-size: 20px;\n      font-weight: 700;\n    }\n\n    > *:not(style) {\n      margin-bottom: 10px;\n    }\n  }\n\n  .btn_wrap {\n    display: flex;\n    padding-bottom: 16px;\n\n    span {\n      margin-right: auto;\n    }\n\n    button {\n      color: #7966ff;\n      font-size: 16px;\n\n      &.choose {\n        width: 94px;\n        height: 40px;\n        background-color: #ffd703;\n        color: #fff;\n        border-radius: 40px;\n        cursor: default;\n      }\n    }\n\n    .edit_btn:before {\n      content: \"\";\n      margin: 0 12px;\n      border-left: solid 1px #7966ff;\n    }\n  }\n`;\n\nconst SC_Commentbox = styled.div`\n  padding-top: 24px;\n  border-top: solid 1px #dadada;\n`;\n\nconst SC_CommentList = styled.div`\n  --gray-color: #c4c4c4;\n\n  > div {\n    display: flex;\n    padding: 18px 24px;\n    border-bottom: solid 1px #dadada;\n    color: var(--gray-color);\n    flex-direction: column;\n    justify-content: space-between;\n\n    &:last-child {\n      border-bottom: none;\n    }\n  }\n\n  p {\n    flex: auto;\n    margin: 3px;\n\n    > textarea {\n      width: 1000px;\n      height: 100px;\n    }\n  }\n\n  p.comment {\n    flex: auto;\n    margin: 3px;\n    height: 2rem;\n    width: 100%;\n    height: 100%;\n    color: #797979;\n\n    > textarea {\n      width: 100%;\n      height: 100%;\n    }\n  }\n\n  strong {\n    color: #333;\n    font-weight: normal;\n    margin-left: 8px;\n  }\n\n  em {\n    font-style: normal;\n    padding-left: 16px;\n    margin-left: 16px;\n    border-left: solid 1px var(--gray-color);\n  }\n  div.mycomment {\n    display: flex;\n    justify-content: space-between;\n    > div {\n      display: flex;\n      align-items: center;\n      line-height: 1rem;\n    }\n    > div.button {\n      width: 60px;\n      justify-content: space-between;\n    }\n  }\n  div.comment {\n    display: flex;\n    align-items: center;\n  }\n  button {\n    color: var(--gray-color);\n    font-size: 1rem;\n  }\n`;\n\nexport default AnswerList;\n"]},"metadata":{},"sourceType":"module"}