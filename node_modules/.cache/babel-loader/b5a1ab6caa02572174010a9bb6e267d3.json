{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/cyj/sun/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";import _slicedToArray from\"/Users/cyj/sun/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _templateObject;import React,{useState}from\"react\";import styled from\"styled-components\";import Stomp,{over}from\"stompjs\";import SockJs from\"sockjs-client\";import{history}from\"../redux/configureStore\";import{useDispatch,useSelector}from\"react-redux\";import{actionCreators as loOutAction}from\"../redux/modules/user\";import Serch from\"./Serch\";import Profile from\"../elements/Profile\";import Category from\"./Category\";import{delToken}from\"../shared/token\";import{apiUrl}from\"../elements/testApiUrl\";import{ReactComponent as LogoSvg}from\"../svg/logo_header.svg\";import{ReactComponent as ArrowDown}from\"../svg/arrow_down_b.svg\";import{ReactComponent as User}from\"../svg/user.svg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var stompClient=null;var Header=function Header(){var isLogin=sessionStorage.getItem(\"isLogin\");var nickname=sessionStorage.getItem(\"nickname\");var userImage=sessionStorage.getItem(\"userImage\");var _useState=useState(false),_useState2=_slicedToArray(_useState,2),view=_useState2[0],setView=_useState2[1];var View=function View(){setView(!view);};var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),goPost=_React$useState2[0],setGoPost=_React$useState2[1];var token={Authorization:sessionStorage.getItem(\"token\")};var Logout=function Logout(){delToken();};React.useEffect(function(){if(nickname){var socket=new SockJs(\"\".concat(apiUrl,\"/ws\"));stompClient=Stomp.over(socket);stompClient.connect({},function(){stompClient.subscribe(\"/queue/user/\".concat(nickname),function(payload){var payloadData=JSON.parse(payload.body);console.log(payloadData);setGoPost(payloadData);},token);});}else{// stompClient.disconnect(() => {\n//   stompClient.unsubscribe(`/queue/user/${nickname}`);\n// });\n}},[]);return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(LogoSvg,{className:\"Logo\",onClick:function onClick(){return history.push(\"/\");}}),/*#__PURE__*/_jsx(Category,{}),/*#__PURE__*/_jsx(Serch,{}),!isLogin?/*#__PURE__*/_jsxs(\"div\",{className:\"auth none\",onClick:function onClick(){return history.push(\"/login\");},children:[/*#__PURE__*/_jsx(\"i\",{children:/*#__PURE__*/_jsx(User,{})}),/*#__PURE__*/_jsx(\"span\",{children:\"\\uD68C\\uC6D0\\uAC00\\uC785/\\uB85C\\uADF8\\uC778\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"auth my\",onClick:View,children:[/*#__PURE__*/_jsx(\"i\",{className:goPost.status?\"active\":\"\",children:/*#__PURE__*/_jsx(Profile,{size:36,imgUrl:userImage})}),nickname,/*#__PURE__*/_jsx(ArrowDown,{className:\"arrow\"}),view?/*#__PURE__*/_jsxs(\"ul\",{className:\"view\",children:[/*#__PURE__*/_jsx(\"li\",{onClick:function onClick(){return history.push(\"/useredit\");},children:\"\\uD504\\uB85C\\uD544 \\uD3B8\\uC9D1\"}),/*#__PURE__*/_jsx(\"li\",{onClick:function onClick(){return history.push(\"/passedit\");},children:\"\\uBE44\\uBC00\\uBC88\\uD638 \\uC7AC\\uC124\\uC815\"}),/*#__PURE__*/_jsx(\"li\",{onClick:function onClick(){return history.push(\"/alarms\");},children:\"\\uC54C\\uB78C \\uB0B4\\uC5ED\"}),/*#__PURE__*/_jsx(\"li\",{onClick:function onClick(){return history.push(\"/scrap\");},children:\"\\uAD00\\uC2EC\\uAE00\"}),/*#__PURE__*/_jsx(\"li\",{className:\"logout\",onClick:Logout,children:\"\\uB85C\\uADF8\\uC544\\uC6C3\"})]}):null]})]})});};var Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  height: 100px;\\n  margin-bottom: 24px;\\n  box-shadow: -4px 5px 14px 0 rgb(65 0 131 / 6%);\\n\\n  > div {\\n    display: flex;\\n    width: 1440px;\\n    height: 100%;\\n    margin: 0 auto;\\n    align-items: center;\\n  }\\n\\n  .auth {\\n    position: relative;\\n    align-items: center;\\n    justify-content: center;\\n    width: 280px;\\n    height: 52px;\\n    padding-left: 20px;\\n    padding-right: 17px;\\n    border-radius: 8px;\\n    box-shadow: 0 0 4px 0 rgba(172, 168, 203, 0.2);\\n    cursor: pointer;\\n  }\\n\\n  .Logo {\\n    flex: none;\\n    width: 220px;\\n    height: 38px;\\n    cursor: pointer;\\n  }\\n\\n  div.my {\\n    display: flex;\\n\\n    i {\\n      margin-right: 10px;\\n    }\\n\\n    i.active {\\n      span {\\n        position: relative;\\n      }\\n      span:before {\\n        --alert-size: 10px;\\n        content: \\\"\\\";\\n        position: absolute;\\n        bottom: 2px;\\n        right: -2px;\\n        width: var(--alert-size);\\n        height: var(--alert-size);\\n        border-radius: var(--alert-size);\\n        background-color: #de0000;\\n        box-shadow: 0 1px 3px 0 rgba(245, 80, 80, 0.25);\\n      }\\n    }\\n  }\\n\\n  div.my > .arrow {\\n    margin-left: auto;\\n    width: 24px;\\n    height: 24px;\\n  }\\n\\n  div.none {\\n    width: 191;\\n    height: 63px;\\n    display: flex;\\n    color: #7966ff;\\n    align-items: center;\\n    cursor: pointer;\\n  }\\n\\n  ul.view {\\n    position: absolute;\\n    top: calc(100% + 8px);\\n    right: 0;\\n    width: 100%;\\n    padding: 30px 24px;\\n    background-color: #fff;\\n    border-radius: 8px;\\n    z-index: 10;\\n    box-shadow: 0 0 10px 0 rgba(172, 168, 203, 0.4);\\n  }\\n\\n  ul.view > li {\\n    height: 2rem;\\n    padding: 4px 8px;\\n    margin-bottom: 6px;\\n    font-size: 1rem;\\n    text-align: center;\\n    cursor: pointer;\\n    color: #333;\\n    font-size: 16px;\\n    border-radius: 2px;\\n\\n    &.logout {\\n      color: #797979;\\n      &:hover {\\n        background-color: #998bff;\\n      }\\n    }\\n\\n    &:hover {\\n      color: #fff;\\n      background-color: #7966ff;\\n    }\\n  }\\n\\n  i {\\n    display: inline-flex;\\n    margin-right: 12px;\\n  }\\n\\n  img {\\n    width: 100%;\\n    height: 100%;\\n  }\\n\\n  button {\\n    width: 138px;\\n    height: 52px;\\n    border-radius: 2rem;\\n    font-size: 14px;\\n    color: black;\\n  }\\n\"])));export default Header;","map":{"version":3,"sources":["/Users/cyj/sun/src/components/Header.js"],"names":["React","useState","styled","Stomp","over","SockJs","history","useDispatch","useSelector","actionCreators","loOutAction","Serch","Profile","Category","delToken","apiUrl","ReactComponent","LogoSvg","ArrowDown","User","stompClient","Header","isLogin","sessionStorage","getItem","nickname","userImage","view","setView","View","goPost","setGoPost","token","Authorization","Logout","useEffect","socket","connect","subscribe","payload","payloadData","JSON","parse","body","console","log","push","status","Container","div"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport styled from \"styled-components\";\n\nimport Stomp, { over } from \"stompjs\";\nimport SockJs from \"sockjs-client\";\n\nimport { history } from \"../redux/configureStore\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { actionCreators as loOutAction } from \"../redux/modules/user\";\nimport Serch from \"./Serch\";\nimport Profile from \"../elements/Profile\";\nimport Category from \"./Category\";\nimport { delToken } from \"../shared/token\";\nimport { apiUrl } from \"../elements/testApiUrl\";\nimport { ReactComponent as LogoSvg } from \"../svg/logo_header.svg\";\nimport { ReactComponent as ArrowDown } from \"../svg/arrow_down_b.svg\";\nimport { ReactComponent as User } from \"../svg/user.svg\";\n\nlet stompClient = null;\nconst Header = () => {\n  const isLogin = sessionStorage.getItem(\"isLogin\");\n  const nickname = sessionStorage.getItem(\"nickname\");\n  const userImage = sessionStorage.getItem(\"userImage\");\n  const [view, setView] = useState(false);\n  const View = () => {\n    setView(!view);\n  };\n\n  const [goPost, setGoPost] = React.useState(\"\");\n  const token = {\n    Authorization: sessionStorage.getItem(\"token\"),\n  };\n\n  const Logout = () => {\n    delToken();\n  };\n\n  React.useEffect(() => {\n    if (nickname) {\n      let socket = new SockJs(`${apiUrl}/ws`);\n\n      stompClient = Stomp.over(socket);\n      stompClient.connect({}, () => {\n        stompClient.subscribe(\n          `/queue/user/${nickname}`,\n          (payload) => {\n            let payloadData = JSON.parse(payload.body);\n            console.log(payloadData);\n            setGoPost(payloadData);\n          },\n          token\n        );\n      });\n    } else {\n      // stompClient.disconnect(() => {\n      //   stompClient.unsubscribe(`/queue/user/${nickname}`);\n      // });\n    }\n  }, []);\n\n  return (\n    <Container>\n      <div>\n        <LogoSvg className='Logo' onClick={() => history.push(\"/\")} />\n\n        <Category />\n\n        <Serch />\n        {!isLogin ? (\n          <div className='auth none' onClick={() => history.push(\"/login\")}>\n            <i>\n              <User />\n            </i>\n            <span>회원가입/로그인</span>\n          </div>\n        ) : (\n          <div className='auth my' onClick={View}>\n            <i className={goPost.status ? \"active\" : \"\"}>\n              <Profile size={36} imgUrl={userImage} />\n            </i>\n            {nickname}\n            <ArrowDown className='arrow' />\n            {view ? (\n              <ul className='view'>\n                <li onClick={() => history.push(\"/useredit\")}>프로필 편집</li>\n                <li onClick={() => history.push(\"/passedit\")}>\n                  비밀번호 재설정\n                </li>\n                <li onClick={() => history.push(\"/alarms\")}>알람 내역</li>\n                <li onClick={() => history.push(\"/scrap\")}>관심글</li>\n                <li className='logout' onClick={Logout}>\n                  로그아웃\n                </li>\n              </ul>\n            ) : null}\n          </div>\n        )}\n      </div>\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  height: 100px;\n  margin-bottom: 24px;\n  box-shadow: -4px 5px 14px 0 rgb(65 0 131 / 6%);\n\n  > div {\n    display: flex;\n    width: 1440px;\n    height: 100%;\n    margin: 0 auto;\n    align-items: center;\n  }\n\n  .auth {\n    position: relative;\n    align-items: center;\n    justify-content: center;\n    width: 280px;\n    height: 52px;\n    padding-left: 20px;\n    padding-right: 17px;\n    border-radius: 8px;\n    box-shadow: 0 0 4px 0 rgba(172, 168, 203, 0.2);\n    cursor: pointer;\n  }\n\n  .Logo {\n    flex: none;\n    width: 220px;\n    height: 38px;\n    cursor: pointer;\n  }\n\n  div.my {\n    display: flex;\n\n    i {\n      margin-right: 10px;\n    }\n\n    i.active {\n      span {\n        position: relative;\n      }\n      span:before {\n        --alert-size: 10px;\n        content: \"\";\n        position: absolute;\n        bottom: 2px;\n        right: -2px;\n        width: var(--alert-size);\n        height: var(--alert-size);\n        border-radius: var(--alert-size);\n        background-color: #de0000;\n        box-shadow: 0 1px 3px 0 rgba(245, 80, 80, 0.25);\n      }\n    }\n  }\n\n  div.my > .arrow {\n    margin-left: auto;\n    width: 24px;\n    height: 24px;\n  }\n\n  div.none {\n    width: 191;\n    height: 63px;\n    display: flex;\n    color: #7966ff;\n    align-items: center;\n    cursor: pointer;\n  }\n\n  ul.view {\n    position: absolute;\n    top: calc(100% + 8px);\n    right: 0;\n    width: 100%;\n    padding: 30px 24px;\n    background-color: #fff;\n    border-radius: 8px;\n    z-index: 10;\n    box-shadow: 0 0 10px 0 rgba(172, 168, 203, 0.4);\n  }\n\n  ul.view > li {\n    height: 2rem;\n    padding: 4px 8px;\n    margin-bottom: 6px;\n    font-size: 1rem;\n    text-align: center;\n    cursor: pointer;\n    color: #333;\n    font-size: 16px;\n    border-radius: 2px;\n\n    &.logout {\n      color: #797979;\n      &:hover {\n        background-color: #998bff;\n      }\n    }\n\n    &:hover {\n      color: #fff;\n      background-color: #7966ff;\n    }\n  }\n\n  i {\n    display: inline-flex;\n    margin-right: 12px;\n  }\n\n  img {\n    width: 100%;\n    height: 100%;\n  }\n\n  button {\n    width: 138px;\n    height: 52px;\n    border-radius: 2rem;\n    font-size: 14px;\n    color: black;\n  }\n`;\n\nexport default Header;\n"]},"metadata":{},"sourceType":"module"}