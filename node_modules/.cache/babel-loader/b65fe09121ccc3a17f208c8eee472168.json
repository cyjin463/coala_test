{"ast":null,"code":"import _defineProperty from\"/Users/cyj/sun/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";var _handleActions;import React from\"react\";import axios from\"axios\";import Swal from\"sweetalert2\";import{createAction,handleActions}from\"redux-actions\";import produce from\"immer\";import{apiUrl}from\"../../elements/testApiUrl\";var token=sessionStorage.getItem(\"token\");var COMMENT_ADD=\"COMMENT_ADD\";var COMMENT_DELETE=\"COMMENT_DELETE\";var addComment=createAction(COMMENT_ADD,function(comment){return{comment:comment};});var deleteComment=createAction(COMMENT_DELETE,function(comment){return{comment:comment};});var initialState={list:[]};var addCommentDB=function addCommentDB(uid,pid,answerId,comment){return function(dispatch,getState,_ref){var history=_ref.history;console.log(uid,pid,answerId,comment);axios.post(\"\".concat(apiUrl,\"/islogin/comment/write\"),{uid:uid,pid:pid,answerId:answerId,comment:comment},{headers:{Authorization:token}}).then(function(res){console.log(res);dispatch(addComment(res));window.location.reload();}).catch(function(err){console.log(err);Swal.fire(\"\",\"댓글 추가 실패\",\"error\");});};};var editCommentDB=function editCommentDB(commentId,comment,pid){console.log(commentId,comment);return function(dispatch,getState,_ref2){var history=_ref2.history;axios.put(\"\".concat(apiUrl,\"/islogin/comment/revice/\").concat(commentId),{comment:comment},{headers:{Authorization:token}}).then(function(res){console.log(res);window.location.replace(\"/detail/\".concat(pid));}).catch(function(err){console.log(err);Swal.fire(\"\",\"댓글 수정 실패\",\"error\");});};};var deleteCommentDB=function deleteCommentDB(commentId){return function(dispatch,getState,_ref3){var history=_ref3.history;console.log(commentId);axios.delete(\"\".concat(apiUrl,\"/islogin/comment/delete/\").concat(commentId),{headers:{Authorization:token}}).then(function(res){console.log(res);dispatch(deleteComment(commentId));window.location.reload();}).catch(function(err){console.log(err);Swal.fire(\"\",\"댓글 삭제 실패\",\"error\");});};};export default handleActions((_handleActions={},_defineProperty(_handleActions,COMMENT_ADD,function(state,action){return produce(state,function(draft){draft.list.push(action.payload);});}),_defineProperty(_handleActions,COMMENT_DELETE,function(state,action){return produce(state,function(draft){});}),_handleActions),initialState);var actionCreators={addComment:addComment,deleteComment:deleteComment,addCommentDB:addCommentDB,editCommentDB:editCommentDB,deleteCommentDB:deleteCommentDB};export{actionCreators};","map":{"version":3,"sources":["/Users/cyj/sun/src/redux/modules/comment.js"],"names":["React","axios","Swal","createAction","handleActions","produce","apiUrl","token","sessionStorage","getItem","COMMENT_ADD","COMMENT_DELETE","addComment","comment","deleteComment","initialState","list","addCommentDB","uid","pid","answerId","dispatch","getState","history","console","log","post","headers","Authorization","then","res","window","location","reload","catch","err","fire","editCommentDB","commentId","put","replace","deleteCommentDB","delete","state","action","draft","push","payload","actionCreators"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\nimport Swal from \"sweetalert2\";\nimport { createAction, handleActions } from \"redux-actions\";\nimport produce from \"immer\";\nimport { apiUrl } from \"../../elements/testApiUrl\";\n\nconst token = sessionStorage.getItem(\"token\");\n\nconst COMMENT_ADD = \"COMMENT_ADD\";\nconst COMMENT_DELETE = \"COMMENT_DELETE\";\n\nconst addComment = createAction(COMMENT_ADD, (comment) => ({ comment }));\nconst deleteComment = createAction(COMMENT_DELETE, (comment) => ({ comment }));\n\nconst initialState = {\n  list: [],\n};\n\nconst addCommentDB = (uid, pid, answerId, comment) => {\n  return function (dispatch, getState, { history }) {\n    console.log(uid, pid, answerId, comment);\n    axios\n      .post(\n        `${apiUrl}/islogin/comment/write`,\n        {\n          uid: uid,\n          pid: pid,\n          answerId: answerId,\n          comment: comment,\n        },\n        {\n          headers: {\n            Authorization: token,\n          },\n        }\n      )\n      .then((res) => {\n        console.log(res);\n        dispatch(addComment(res));\n        window.location.reload();\n      })\n      .catch((err) => {\n        console.log(err);\n        Swal.fire(\"\", \"댓글 추가 실패\", \"error\");\n      });\n  };\n};\n\nconst editCommentDB = (commentId, comment, pid) => {\n  console.log(commentId, comment);\n  return function (dispatch, getState, { history }) {\n    axios\n      .put(\n        `${apiUrl}/islogin/comment/revice/${commentId}`,\n        {\n          comment: comment,\n        },\n        {\n          headers: {\n            Authorization: token,\n          },\n        }\n      )\n      .then((res) => {\n        console.log(res);\n        window.location.replace(`/detail/${pid}`);\n      })\n      .catch((err) => {\n        console.log(err);\n        Swal.fire(\"\", \"댓글 수정 실패\", \"error\");\n      });\n  };\n};\n\nconst deleteCommentDB = (commentId) => {\n  return function (dispatch, getState, { history }) {\n    console.log(commentId);\n    axios\n      .delete(`${apiUrl}/islogin/comment/delete/${commentId}`, {\n        headers: {\n          Authorization: token,\n        },\n      })\n      .then((res) => {\n        console.log(res);\n        dispatch(deleteComment(commentId));\n        window.location.reload();\n      })\n      .catch((err) => {\n        console.log(err);\n        Swal.fire(\"\", \"댓글 삭제 실패\", \"error\");\n      });\n  };\n};\n\nexport default handleActions(\n  {\n    [COMMENT_ADD]: (state, action) =>\n      produce(state, (draft) => {\n        draft.list.push(action.payload);\n      }),\n    [COMMENT_DELETE]: (state, action) => produce(state, (draft) => {}),\n  },\n  initialState\n);\n\nconst actionCreators = {\n  addComment,\n  deleteComment,\n  addCommentDB,\n  editCommentDB,\n  deleteCommentDB,\n};\n\nexport { actionCreators };\n"]},"metadata":{},"sourceType":"module"}