{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/cyj/sun/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";import _defineProperty from\"/Users/cyj/sun/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/cyj/sun/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/cyj/sun/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4;import React from\"react\";import styled from\"styled-components\";import Swal from\"sweetalert2\";import{useLocation,useParams}from\"react-router\";import{useDispatch,useSelector}from\"react-redux\";import{ReactComponent as ArrowSvg}from\"../svg/arrow_down_b.svg\";import{ReactComponent as ArrowActiveSvg}from\"../svg/arrow_up_b.svg\";import{actionCreators as postActions}from\"../redux/modules/post\";import{history}from\"../redux/configureStore\";import{category}from\"../elements/category\";import ImgUpload from\"../components/ImgUpload\";import Chat from\"../components/Chat\";import Banner from\"../elements/Banner\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Create=function Create(){var dispatch=useDispatch();var location=useLocation();var params=useParams().pid;var isCreate=location.pathname===\"/create\";var img_list=useSelector(function(state){var _state$post;return(_state$post=state.post)===null||_state$post===void 0?void 0:_state$post.preview;});var post_one=useSelector(function(state){return state.post.one_list;});var _React$useState=React.useState(!isCreate?post_one:[]),_React$useState2=_slicedToArray(_React$useState,2),addPost=_React$useState2[0],setAddPost=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isSelect=_React$useState4[0],setIsSelect=_React$useState4[1];var _React$useState5=React.useState(\"\"),_React$useState6=_slicedToArray(_React$useState5,2),oneCategory=_React$useState6[0],setOneCategory=_React$useState6[1];var token=sessionStorage.getItem(\"token\");var reg=/[\\{\\}\\[\\]\\/?.,;:|\\)*~`!^\\-_+<>@\\#$%&\\\\\\=\\(\\'\\\"]/gi;React.useEffect(function(){window.scrollTo(0,0);if(!isCreate){dispatch(postActions.getOnePostDB(params));setAddPost(post_one);setOneCategory(addPost.category);}},[]);var onChange=function onChange(e){var id=e.target.id;var content=e.target.value;setAddPost(_objectSpread(_objectSpread({},addPost),{},_defineProperty({},id,content)));};var submit=function submit(){if(!addPost.title||!addPost.comment){Swal.fire(\"\",\"내용을 모두 입력해주세요 :)\",\"error\");return;}else if(!oneCategory){Swal.fire(\"\",\"카테고리를 선택해 주세요 :)\",\"error\");return;}else if(addPost.tags){var _addPost$tags;var tags=(_addPost$tags=addPost.tags)===null||_addPost$tags===void 0?void 0:_addPost$tags.split(\"#\").splice(1);var text_tag=tags.map(function(v){return reg.test(v)?v.replace(reg,\"\"):v;}).filter(function(v){return v!==\"\";});dispatch(postActions.addPostDB(_objectSpread(_objectSpread({},addPost),{},{tags:text_tag,category:oneCategory})));}else{dispatch(postActions.addPostDB(_objectSpread(_objectSpread({},addPost),{},{category:oneCategory})));}};var revise=function revise(){if(typeof addPost.tags===\"string\"){var _addPost$tags2;var tags=(_addPost$tags2=addPost.tags)===null||_addPost$tags2===void 0?void 0:_addPost$tags2.split(\"#\").splice(1);var text_tag=tags.map(function(v){return reg.test(v)?v.replace(reg,\"\"):v;}).filter(function(v){return v!==\"\";});dispatch(postActions.editPostDB(_objectSpread(_objectSpread({},addPost),{},{pid:params,tag:text_tag,category:oneCategory})));}else{dispatch(postActions.editPostDB(_objectSpread(_objectSpread({},addPost),{},{pid:params,category:oneCategory})));}};if(!isCreate){var _addPost$tag;return/*#__PURE__*/_jsxs(CreateWrap,{children:[/*#__PURE__*/_jsxs(PostWrap,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uC218\\uC815 \\uD398\\uC774\\uC9C0\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"\\uCE74\\uD14C\\uACE0\\uB9AC \\uC120\\uD0DD\"}),/*#__PURE__*/_jsxs(CategoryDiv,{length:category.length,children:[/*#__PURE__*/_jsxs(\"span\",{className:oneCategory===\"\"?\"\":\"choose\",onClick:function onClick(){setIsSelect(!isSelect);},children:[oneCategory?oneCategory:addPost.category?addPost.category:\" 카테고리를 선택\",isSelect?/*#__PURE__*/_jsx(ArrowActiveSvg,{}):/*#__PURE__*/_jsx(ArrowSvg,{})]}),/*#__PURE__*/_jsx(\"ul\",{className:isSelect?\"\":\"close\",children:category.map(function(v,idx){return/*#__PURE__*/_jsx(\"li\",{onClick:function onClick(){setOneCategory(v.name);setIsSelect(false);},children:v.name},idx);})})]}),/*#__PURE__*/_jsx(\"h2\",{children:\"\\uC81C\\uBAA9\"}),/*#__PURE__*/_jsx(\"input\",{id:\"postTitle\",onChange:onChange,type:\"text\",value:addPost.postTitle}),/*#__PURE__*/_jsx(\"h2\",{children:\"\\uB0B4\\uC6A9\"}),/*#__PURE__*/_jsxs(TextareaImg,{children:[/*#__PURE__*/_jsx(\"textarea\",{id:\"postComment\",onChange:onChange,type:\"text\",value:addPost.postComment}),/*#__PURE__*/_jsx(ImgUpload,{isEdit:true,editImg:addPost.postImg})]}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"\\uD0DC\\uADF8\\uC785\\uB825\",/*#__PURE__*/_jsx(\"em\",{})]}),/*#__PURE__*/_jsx(\"input\",{id:\"tags\",onChange:onChange,type:\"text\",placeholder:\"#\".concat((_addPost$tag=addPost.tag)===null||_addPost$tag===void 0?void 0:_addPost$tag.join(\" #\"))}),/*#__PURE__*/_jsx(\"button\",{onClick:revise,children:\"\\uC218\\uC815 click\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){history.replace(\"/detail/\".concat(params));},children:\"\\uCDE8\\uC18C\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"right\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Chat,{}),/*#__PURE__*/_jsx(Banner,{})]})})]});}return/*#__PURE__*/_jsxs(CreateWrap,{children:[/*#__PURE__*/_jsxs(PostWrap,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uAE00\\uC4F0\\uAE30 \\uD398\\uC774\\uC9C0\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"\\uCE74\\uD14C\\uACE0\\uB9AC \\uC120\\uD0DD\"}),/*#__PURE__*/_jsxs(CategoryDiv,{length:category.length,children:[/*#__PURE__*/_jsxs(\"span\",{className:oneCategory===\"\"?\"\":\"choose\",onClick:function onClick(){setIsSelect(!isSelect);},children:[oneCategory===\"\"?\" 카테고리를 선택\":oneCategory,isSelect?/*#__PURE__*/_jsx(ArrowActiveSvg,{}):/*#__PURE__*/_jsx(ArrowSvg,{})]}),/*#__PURE__*/_jsx(\"ul\",{className:isSelect?\"\":\"close\",children:category.map(function(v,idx){return/*#__PURE__*/_jsx(\"li\",{onClick:function onClick(){setOneCategory(v.name);setIsSelect(false);},children:v.name},idx);})})]}),/*#__PURE__*/_jsx(\"h2\",{children:\"\\uC81C\\uBAA9\"}),/*#__PURE__*/_jsx(\"input\",{id:\"title\",onChange:onChange,type:\"text\",placeholder:\"\\uC81C\\uBAA9\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"\\uB0B4\\uC6A9\"}),/*#__PURE__*/_jsxs(TextareaImg,{children:[/*#__PURE__*/_jsx(\"textarea\",{id:\"comment\",onChange:onChange,type:\"text\",placeholder:\"\\uB0B4\\uC6A9\"}),/*#__PURE__*/_jsx(ImgUpload,{})]}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"\\uD0DC\\uADF8\\uC785\\uB825\",/*#__PURE__*/_jsx(\"em\",{children:\"(\\uC120\\uD0DD\\uC0AC\\uD56D)\"})]}),/*#__PURE__*/_jsx(\"input\",{id:\"tags\",onChange:onChange,type:\"text\",placeholder:\"\\uD2B9\\uC218\\uBB38\\uC790\\uB294 # \\uB9CC \\uC785\\uB825 \\uAC00\\uB2A5\\uD569\\uB2C8\\uB2E4.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:submit,children:\"\\uC62C\\uB9AC\\uAE30\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"right\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Chat,{}),/*#__PURE__*/_jsx(Banner,{})]})})]});};var CreateWrap=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: flex;\\n  width: 1440px;\\n  margin: 0 auto;\\n  margin-bottom: 24px;\\n  gap: 24px;\\n\\n  .right {\\n    flex: none;\\n    width: 342px;\\n\\n    > div {\\n      position: sticky;\\n      top: 0;\\n    }\\n  }\\n\"])));var PostWrap=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  padding: 50px 26px;\\n  border-radius: 8px;\\n  box-shadow: 0 4px 20px 0 rgba(228, 226, 242, 0.45);\\n\\n  h1 {\\n    display: none;\\n  }\\n\\n  h2 {\\n    font-size: 16px;\\n    margin-bottom: 8px;\\n\\n    em {\\n      font-weight: normal;\\n      font-style: normal;\\n      margin-left: 4px;\\n      color: #797979;\\n      font-size: 12px;\\n    }\\n  }\\n\\n  label > input#file-upload-button {\\n    display: none;\\n  }\\n\\n  input {\\n    display: block;\\n    width: 100%;\\n    height: 52px;\\n    padding: 16px;\\n    margin-bottom: 24px;\\n    border: none;\\n    border-radius: 8px;\\n    background-color: #fbfbfd;\\n\\n    &::placeholder {\\n      color: #797979;\\n    }\\n  }\\n\\n  button {\\n    display: block;\\n    width: 200px;\\n    line-height: 50px;\\n    margin-top: 48px;\\n    margin-left: auto;\\n    background-color: #7966ff;\\n    border-radius: 8px;\\n    font-size: 16px;\\n    color: #fff;\\n  }\\n\"])));var TextareaImg=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  margin-bottom: 40px;\\n  border-radius: 8px;\\n  background-color: #fbfbfd;\\n\\n  textarea {\\n    display: block;\\n    width: 100%;\\n    padding: 16px;\\n    min-height: 400px;\\n    border: none;\\n    background-color: transparent;\\n    resize: none;\\n\\n    &::placeholder {\\n      color: #797979;\\n    }\\n  }\\n\\n  .img_load {\\n    border-radius: 8px;\\n    border-bottom: none;\\n    background-color: #f4f4fb;\\n  }\\n\"])));var CategoryDiv=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  display: inline-block;\\n  width: 300px;\\n  margin-bottom: 24px;\\n  position: relative;\\n\\n  > span {\\n    display: flex;\\n    align-items: center;\\n    justify-content: space-between;\\n    width: 100%;\\n    height: 52px;\\n    line-height: 52px;\\n    padding: 0 16px;\\n    line-height: 46px;\\n    color: #797979;\\n    border-radius: 8px;\\n    background-color: #fbfbfd;\\n\\n    &.choose {\\n      color: #7966ff;\\n    }\\n  }\\n\\n  ul {\\n    position: absolute;\\n    top: calc(46px + 8px);\\n    left: 0;\\n    width: 100%;\\n    height: \",\";\\n    overflow: hidden;\\n    margin: 0;\\n    transition: height 0.5s ease-out;\\n    background-color: #fff;\\n    border-radius: 0 0 8px 8px;\\n    box-shadow: 0 4px 14px 0 rgba(65, 0, 131, 0.06);\\n\\n    &.close {\\n      height: 0;\\n      padding: 0;\\n    }\\n  }\\n\\n  li {\\n    margin: 0 10px;\\n    text-align: center;\\n    line-height: 46px;\\n    cursor: pointer;\\n\\n    &:nth-child(1) {\\n      margin-top: 10px;\\n    }\\n\\n    &:last-child {\\n      margin-bottom: 10px;\\n    }\\n    &:hover {\\n      background-color: #7966ff;\\n      color: #fff;\\n    }\\n  }\\n\"])),function(props){return\"calc(\".concat(props.length,\" * 46px + 20px)\");});export default Create;","map":{"version":3,"sources":["/Users/cyj/sun/src/page/Create.js"],"names":["React","styled","Swal","useLocation","useParams","useDispatch","useSelector","ReactComponent","ArrowSvg","ArrowActiveSvg","actionCreators","postActions","history","category","ImgUpload","Chat","Banner","Create","dispatch","location","params","pid","isCreate","pathname","img_list","state","post","preview","post_one","one_list","useState","addPost","setAddPost","isSelect","setIsSelect","oneCategory","setOneCategory","token","sessionStorage","getItem","reg","useEffect","window","scrollTo","getOnePostDB","onChange","e","id","target","content","value","submit","title","comment","fire","tags","split","splice","text_tag","map","v","test","replace","filter","addPostDB","revise","editPostDB","tag","length","idx","name","postTitle","postComment","postImg","join","CreateWrap","div","PostWrap","TextareaImg","CategoryDiv","props"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport styled from \"styled-components\";\nimport Swal from \"sweetalert2\";\nimport { useLocation, useParams } from \"react-router\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { ReactComponent as ArrowSvg } from \"../svg/arrow_down_b.svg\";\nimport { ReactComponent as ArrowActiveSvg } from \"../svg/arrow_up_b.svg\";\nimport { actionCreators as postActions } from \"../redux/modules/post\";\nimport { history } from \"../redux/configureStore\";\nimport { category } from \"../elements/category\";\nimport ImgUpload from \"../components/ImgUpload\";\nimport Chat from \"../components/Chat\";\nimport Banner from \"../elements/Banner\";\n\nconst Create = () => {\n  const dispatch = useDispatch();\n  const location = useLocation();\n  const params = useParams().pid;\n\n  const isCreate = location.pathname === \"/create\";\n  const img_list = useSelector((state) => state.post?.preview);\n  const post_one = useSelector((state) => state.post.one_list);\n  const [addPost, setAddPost] = React.useState(!isCreate ? post_one : []);\n  const [isSelect, setIsSelect] = React.useState(false);\n  const [oneCategory, setOneCategory] = React.useState(\"\");\n  const token = sessionStorage.getItem(\"token\");\n  const reg = /[\\{\\}\\[\\]\\/?.,;:|\\)*~`!^\\-_+<>@\\#$%&\\\\\\=\\(\\'\\\"]/gi;\n\n  React.useEffect(() => {\n    window.scrollTo(0, 0);\n    if (!isCreate) {\n      dispatch(postActions.getOnePostDB(params));\n      setAddPost(post_one);\n      setOneCategory(addPost.category);\n    }\n  }, []);\n\n  const onChange = (e) => {\n    const id = e.target.id;\n    const content = e.target.value;\n\n    setAddPost({ ...addPost, [id]: content });\n  };\n\n  const submit = () => {\n    if (!addPost.title || !addPost.comment) {\n      Swal.fire(\"\", \"내용을 모두 입력해주세요 :)\", \"error\");\n      return;\n    } else if (!oneCategory) {\n      Swal.fire(\"\", \"카테고리를 선택해 주세요 :)\", \"error\");\n      return;\n    } else if (addPost.tags) {\n      const tags = addPost.tags?.split(\"#\").splice(1);\n\n      let text_tag = tags\n        .map((v) => (reg.test(v) ? v.replace(reg, \"\") : v))\n        .filter((v) => v !== \"\");\n\n      dispatch(\n        postActions.addPostDB({\n          ...addPost,\n          tags: text_tag,\n          category: oneCategory,\n        })\n      );\n    } else {\n      dispatch(\n        postActions.addPostDB({\n          ...addPost,\n          category: oneCategory,\n        })\n      );\n    }\n  };\n\n  const revise = () => {\n    if (typeof addPost.tags === \"string\") {\n      const tags = addPost.tags?.split(\"#\").splice(1);\n\n      let text_tag = tags\n        .map((v) => (reg.test(v) ? v.replace(reg, \"\") : v))\n        .filter((v) => v !== \"\");\n\n      dispatch(\n        postActions.editPostDB({\n          ...addPost,\n          pid: params,\n          tag: text_tag,\n          category: oneCategory,\n        })\n      );\n    } else {\n      dispatch(\n        postActions.editPostDB({\n          ...addPost,\n          pid: params,\n          category: oneCategory,\n        })\n      );\n    }\n  };\n\n  if (!isCreate) {\n    return (\n      <CreateWrap>\n        <PostWrap>\n          <h1>수정 페이지</h1>\n\n          <h2>카테고리 선택</h2>\n          <CategoryDiv length={category.length}>\n            <span\n              className={oneCategory === \"\" ? \"\" : \"choose\"}\n              onClick={() => {\n                setIsSelect(!isSelect);\n              }}>\n              {oneCategory\n                ? oneCategory\n                : addPost.category\n                ? addPost.category\n                : \" 카테고리를 선택\"}\n\n              {isSelect ? <ArrowActiveSvg /> : <ArrowSvg />}\n            </span>\n            <ul className={isSelect ? \"\" : \"close\"}>\n              {category.map((v, idx) => (\n                <li\n                  key={idx}\n                  onClick={() => {\n                    setOneCategory(v.name);\n                    setIsSelect(false);\n                  }}>\n                  {v.name}\n                </li>\n              ))}\n            </ul>\n          </CategoryDiv>\n\n          <h2>제목</h2>\n          <input\n            id='postTitle'\n            onChange={onChange}\n            type='text'\n            value={addPost.postTitle}\n          />\n\n          <h2>내용</h2>\n          <TextareaImg>\n            <textarea\n              id='postComment'\n              onChange={onChange}\n              type='text'\n              value={addPost.postComment}></textarea>\n            <ImgUpload isEdit={true} editImg={addPost.postImg} />\n          </TextareaImg>\n\n          <h2>\n            태그입력<em></em>\n          </h2>\n          <input\n            id='tags'\n            onChange={onChange}\n            type='text'\n            placeholder={`#${addPost.tag?.join(\" #\")}`}\n          />\n          <button onClick={revise}>수정 click</button>\n          <button\n            onClick={() => {\n              history.replace(`/detail/${params}`);\n            }}>\n            취소\n          </button>\n        </PostWrap>\n        <div className='right'>\n          <div>\n            <Chat />\n            <Banner />\n          </div>\n        </div>\n      </CreateWrap>\n    );\n  }\n\n  return (\n    <CreateWrap>\n      <PostWrap>\n        <h1>글쓰기 페이지</h1>\n\n        <h2>카테고리 선택</h2>\n        <CategoryDiv length={category.length}>\n          <span\n            className={oneCategory === \"\" ? \"\" : \"choose\"}\n            onClick={() => {\n              setIsSelect(!isSelect);\n            }}>\n            {oneCategory === \"\" ? \" 카테고리를 선택\" : oneCategory}\n            {isSelect ? <ArrowActiveSvg /> : <ArrowSvg />}\n          </span>\n          <ul className={isSelect ? \"\" : \"close\"}>\n            {category.map((v, idx) => (\n              <li\n                key={idx}\n                onClick={() => {\n                  setOneCategory(v.name);\n                  setIsSelect(false);\n                }}>\n                {v.name}\n              </li>\n            ))}\n          </ul>\n        </CategoryDiv>\n        <h2>제목</h2>\n        <input id='title' onChange={onChange} type='text' placeholder='제목' />\n\n        <h2>내용</h2>\n        <TextareaImg>\n          <textarea\n            id='comment'\n            onChange={onChange}\n            type='text'\n            placeholder='내용'></textarea>\n          <ImgUpload />\n        </TextareaImg>\n\n        <h2>\n          태그입력<em>(선택사항)</em>\n        </h2>\n        <input\n          id='tags'\n          onChange={onChange}\n          type='text'\n          placeholder='특수문자는 # 만 입력 가능합니다.'\n        />\n        <button onClick={submit}>올리기</button>\n      </PostWrap>\n\n      <div className='right'>\n        <div>\n          <Chat />\n          <Banner />\n        </div>\n      </div>\n    </CreateWrap>\n  );\n};\nconst CreateWrap = styled.div`\n  display: flex;\n  width: 1440px;\n  margin: 0 auto;\n  margin-bottom: 24px;\n  gap: 24px;\n\n  .right {\n    flex: none;\n    width: 342px;\n\n    > div {\n      position: sticky;\n      top: 0;\n    }\n  }\n`;\n\nconst PostWrap = styled.div`\n  width: 100%;\n  padding: 50px 26px;\n  border-radius: 8px;\n  box-shadow: 0 4px 20px 0 rgba(228, 226, 242, 0.45);\n\n  h1 {\n    display: none;\n  }\n\n  h2 {\n    font-size: 16px;\n    margin-bottom: 8px;\n\n    em {\n      font-weight: normal;\n      font-style: normal;\n      margin-left: 4px;\n      color: #797979;\n      font-size: 12px;\n    }\n  }\n\n  label > input#file-upload-button {\n    display: none;\n  }\n\n  input {\n    display: block;\n    width: 100%;\n    height: 52px;\n    padding: 16px;\n    margin-bottom: 24px;\n    border: none;\n    border-radius: 8px;\n    background-color: #fbfbfd;\n\n    &::placeholder {\n      color: #797979;\n    }\n  }\n\n  button {\n    display: block;\n    width: 200px;\n    line-height: 50px;\n    margin-top: 48px;\n    margin-left: auto;\n    background-color: #7966ff;\n    border-radius: 8px;\n    font-size: 16px;\n    color: #fff;\n  }\n`;\n\nconst TextareaImg = styled.div`\n  margin-bottom: 40px;\n  border-radius: 8px;\n  background-color: #fbfbfd;\n\n  textarea {\n    display: block;\n    width: 100%;\n    padding: 16px;\n    min-height: 400px;\n    border: none;\n    background-color: transparent;\n    resize: none;\n\n    &::placeholder {\n      color: #797979;\n    }\n  }\n\n  .img_load {\n    border-radius: 8px;\n    border-bottom: none;\n    background-color: #f4f4fb;\n  }\n`;\n\nconst CategoryDiv = styled.div`\n  display: inline-block;\n  width: 300px;\n  margin-bottom: 24px;\n  position: relative;\n\n  > span {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    width: 100%;\n    height: 52px;\n    line-height: 52px;\n    padding: 0 16px;\n    line-height: 46px;\n    color: #797979;\n    border-radius: 8px;\n    background-color: #fbfbfd;\n\n    &.choose {\n      color: #7966ff;\n    }\n  }\n\n  ul {\n    position: absolute;\n    top: calc(46px + 8px);\n    left: 0;\n    width: 100%;\n    height: ${(props) => `calc(${props.length} * 46px + 20px)`};\n    overflow: hidden;\n    margin: 0;\n    transition: height 0.5s ease-out;\n    background-color: #fff;\n    border-radius: 0 0 8px 8px;\n    box-shadow: 0 4px 14px 0 rgba(65, 0, 131, 0.06);\n\n    &.close {\n      height: 0;\n      padding: 0;\n    }\n  }\n\n  li {\n    margin: 0 10px;\n    text-align: center;\n    line-height: 46px;\n    cursor: pointer;\n\n    &:nth-child(1) {\n      margin-top: 10px;\n    }\n\n    &:last-child {\n      margin-bottom: 10px;\n    }\n    &:hover {\n      background-color: #7966ff;\n      color: #fff;\n    }\n  }\n`;\n\nexport default Create;\n"]},"metadata":{},"sourceType":"module"}